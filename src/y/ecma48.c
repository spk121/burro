
#line 1 "ecma48.rl"
// -*- coding: utf-8-unix -*-

// This is an ECMA-48-compliant parser.  It takes a string of
// text data with embedded escape commands and control characters
// and converts it into a set of terminal actions.

// ECMA-48 is a huge standard and is a mixture of printer-specific and
// terminal-specific actions.  Most of the commands are going to
// remain unimplemented.

// ECMA-48 draws a distinction between 'DATA' and 'PRESENTATION'.
// DATA is the order in which characters are received and stored.
// PRESENTATION is the coordinate system of the screen.  For English
// they are one and the same.

#include <stdint.h>
// #include <SDL.h>
#include "eng.h"
#include "console.h"

#define G0 0
#define G1 1
#define G2 2
#define G3 3
int GL = G0;
int GR = G1;

// SIMD - SELECT IMPLICIT MOVEMENT DIRECTION.
// 0 = movement in same direction of character progression.
// 1 = movement in opposite direction of character progression.
static int simd = 0;

// IRM - INSERTION REPLACEMENT MODE
// 0 = graphical characters replace.
// 1 = graphical characters insert
#define IRM_REPLACE 0
#define IRM_INSERT 1
static int irm = IRM_REPLACE;

// HEM - CHARACTER EDITING MODE
#define HEM_FOLLOWING 0
#define HEM_PRECEDING 1
static int hem = 0;
// VEM - VERTICAL CHARACTER EDITING MODE
static int vem = 0;

// GRCM - GRAPHIC RENDITION COMBINATION MODE
#define GRCM_REPLACING 1
#define GRCM_COMBINING 0
static int grcm = GRCM_COMBINING;

// The "home" column.  The left edge of the text area.
static int line_home = 1;

// The "line limit" column.  The right edge of the text area.
static int line_limit = CONSOLE_COLS;

// The "page_home" line.  The top of the text area.
static int page_home = 1;

// The "page_limit" line.  The bottom of text area.
static int page_limit = CONSOLE_ROWS;

// These are locations where parsed parameters from the data
// stream are stored.
#define PARAMS 4
static int P[PARAMS];
static int P_size = 0;

static int p1(int nominal)
{
  if (P_size >= 1) {
    return P[0];
  }
  else
    return nominal;
}

static int p2(int nominal)
{
  if (P_size >= 2)
    return P[1];
  else
    return nominal;
}

static int cs;

#if 0
static void reparse_P() {
    unsigned char *pos = fpc;
    int i, n;
    P_size = 0;
    
    pos --;
    while (*pos >= '0' && *pos <= '9' || *pos == ';') {
      pos --;
    }

  loop:
    n = 0;
    i = 1;
    while (*pos >= '0' && *pos <= '9') {
      n += (*pos - '0') * i;
      i *= 10;
      pos ++;
    }
    P[P_size] = n;
    P_size ++;
    SDL_assert(P_size < PARAMS);
    if (*pos == ';')
      goto loop;
    fpc = pos;
}
#endif

static int codepoint_tables[4][96] =
  {
    { // ISO-646.IRV
      // ISO-IR-2
      0x0020, // SPACE
      0x0021, //  EXCLAMATION MARK
      0x0022, //  QUOTATION MARK
      0x0023, //  NUMBER SIGN
      0x00A4, //  CURRENCY SIGN
      0x0025, //  PERCENT SIGN
      0x0026, //  AMPERSAND
      0x0027, //  APOSTROPHE
      0x0028, //  LEFT PARENTHESIS
      0x0029, //  RIGHT PARENTHESIS
      0x002A, //  ASTERISK
      0x002B, //  PLUS SIGN
      0x002C, //  COMMA
      0x002D, //  HYPHEN-MINUS
      0x002E, //  FULL STOP
      0x002F, //  SOLIDUS
      0x0030, //  DIGIT ZERO
      0x0031, //  DIGIT ONE
      0x0032, //  DIGIT TWO
      0x0033, //  DIGIT THREE
      0x0034, //  DIGIT FOUR
      0x0035, //  DIGIT FIVE
      0x0036, //  DIGIT SIX
      0x0037, //  DIGIT SEVEN
      0x0038, //  DIGIT EIGHT
      0x0039, //  DIGIT NINE
      0x003A, //  COLON
      0x003B, //  SEMICOLON
      0x003C, //  LESS-THAN SIGN
      0x003D, //  EQUALS SIGN
      0x003E, //  GREATER-THAN SIGN
      0x003F, //  QUESTION MARK
      0x0040, //  COMMERCIAL AT
      0x0041, //  LATIN CAPITAL LETTER A
      0x0042, //  LATIN CAPITAL LETTER B
      0x0043, //  LATIN CAPITAL LETTER C
      0x0044, //  LATIN CAPITAL LETTER D
      0x0045, //  LATIN CAPITAL LETTER E
      0x0046, //  LATIN CAPITAL LETTER F
      0x0047, //  LATIN CAPITAL LETTER G
      0x0048, //  LATIN CAPITAL LETTER H
      0x0049, //  LATIN CAPITAL LETTER I
      0x004A, //  LATIN CAPITAL LETTER J
      0x004B, //  LATIN CAPITAL LETTER K
      0x004C, //  LATIN CAPITAL LETTER L
      0x004D, //  LATIN CAPITAL LETTER M
      0x004E, //  LATIN CAPITAL LETTER N
      0x004F, //  LATIN CAPITAL LETTER O
      0x0050, //  LATIN CAPITAL LETTER P
      0x0051, //  LATIN CAPITAL LETTER Q
      0x0052, //  LATIN CAPITAL LETTER R
      0x0053, //  LATIN CAPITAL LETTER S
      0x0054, //  LATIN CAPITAL LETTER T
      0x0055, //  LATIN CAPITAL LETTER U
      0x0056, //  LATIN CAPITAL LETTER V
      0x0057, //  LATIN CAPITAL LETTER W
      0x0058, //  LATIN CAPITAL LETTER X
      0x0059, //  LATIN CAPITAL LETTER Y
      0x005A, //  LATIN CAPITAL LETTER Z
      0x005B, //  LEFT SQUARE BRACKET
      0x005C, //  REVERSE SOLIDUS
      0x005D, //  RIGHT SQUARE BRACKET
      0x005E, //  CIRCUMFLEX ACCENT
      0x005F, //  LOW LINE
      0x0060, //  GRAVE ACCENT
      0x0061, //  LATIN SMALL LETTER A
      0x0062, //  LATIN SMALL LETTER B
      0x0063, //  LATIN SMALL LETTER C
      0x0064, //  LATIN SMALL LETTER D
      0x0065, //  LATIN SMALL LETTER E
      0x0066, //  LATIN SMALL LETTER F
      0x0067, //  LATIN SMALL LETTER G
      0x0068, //  LATIN SMALL LETTER H
      0x0069, //  LATIN SMALL LETTER I
      0x006A, //  LATIN SMALL LETTER J
      0x006B, //  LATIN SMALL LETTER K
      0x006C, //  LATIN SMALL LETTER L
      0x006D, //  LATIN SMALL LETTER M
      0x006E, //  LATIN SMALL LETTER N
      0x006F, //  LATIN SMALL LETTER O
      0x0070, //  LATIN SMALL LETTER P
      0x0071, //  LATIN SMALL LETTER Q
      0x0072, //  LATIN SMALL LETTER R
      0x0073, //  LATIN SMALL LETTER S
      0x0074, //  LATIN SMALL LETTER T
      0x0075, //  LATIN SMALL LETTER U
      0x0076, //  LATIN SMALL LETTER V
      0x0077, //  LATIN SMALL LETTER W
      0x0078, //  LATIN SMALL LETTER X
      0x0079, //  LATIN SMALL LETTER Y
      0x007A, //  LATIN SMALL LETTER Z
      0x007B, //  LEFT CURLY BRACKET
      0x007C, //  VERTICAL LINE
      0x007D, //  RIGHT CURLY BRACKET
      0x203E, //  OVERLINE
      0x007F, //  <delete>
    },
    {
      // VIDEOTEX-SUPPL
      // ISO-IR-70
      0x0020, // SPACE
      0x00A1, //  INVERTED EXCLAMATION MARK
      0x00A2, //  CENT SIGN
      0x00A3, //  POUND SIGN
      0x0024, //  DOLLAR SIGN
      0x00A5, //  YEN SIGN
      0x0023, //  NUMBER SIGN
      0x00A7, //  SECTION SIGN
      0x00A4, //  CURRENCY SIGN
      0x2018, //  LEFT SINGLE QUOTATION MARK
      0x201C, //  LEFT DOUBLE QUOTATION MARK
      0x00AB, //  LEFT-POINTING DOUBLE ANGLE QUOTATION MARK
      0x2190, //  LEFTWARDS ARROW
      0x2191, //  UPWARDS ARROW
      0x2192, //  RIGHTWARDS ARROW
      0x2193, //  DOWNWARDS ARROW
      0x00B0, //  DEGREE SIGN
      0x00B1, //  PLUS-MINUS SIGN
      0x00B2, //  SUPERSCRIPT TWO
      0x00B3, //  SUPERSCRIPT THREE
      0x00D7, //  MULTIPLICATION SIGN
      0x00B5, //  MICRO SIGN
      0x00B6, //  PILCROW SIGN
      0x00B7, //  MIDDLE DOT
      0x00F7, //  DIVISION SIGN
      0x2019, //  RIGHT SINGLE QUOTATION MARK
      0x201D, //  RIGHT DOUBLE QUOTATION MARK
      0x00BB, //  RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK
      0x00BC, //  VULGAR FRACTION ONE QUARTER
      0x00BD, //  VULGAR FRACTION ONE HALF
      0x00BE, //  VULGAR FRACTION THREE QUARTERS
      0x00BF, //  INVERTED QUESTION MARK
      0x0344, //  COMBINING DIAERESIS WITH ACCENT (Greek dialytica tonos)
      0x0300, //  COMBINING GRAVE ACCENT
      0x0301, //  COMBINING ACUTE ACCENT
      0x0302, //  COMBINING CIRCUMFLEX ACCENT
      0x0303, //  COMBINING TILDE
      0x0304, //  COMBINING MACRON
      0x0306, //  COMBINING BREVE
      0x0307, //  COMBINING DOT ABOVE
      0x0308, //  COMBINING DIAERESIS
      0x030a, //  COMBINING RING ABOVE
      0x0327, //  COMBINING CEDILLA
      0x030b, //  COMBINING DOUBLE ACUTE ACCENT
      0x0328, //  COMBINING OGONEK
      0x030c, //  COMBINING CARON
      0x2014, //  EM DASH
      0x00B9, //  SUPERSCRIPT ONE
      0x00AE, //  REGISTERED SIGN
      0x00A9, //  COPYRIGHT SIGN
      0x2122, //  TRADE MARK SIGN
      0x266A, //  EIGHTH NOTE
      0x215B, //  VULGAR FRACTION ONE EIGHTH
      0x215C, //  VULGAR FRACTION THREE EIGHTHS
      0x215D, //  VULGAR FRACTION FIVE EIGHTHS
      0x215E, //  VULGAR FRACTION SEVEN EIGHTHS
      0x2126, //  OHM SIGN
      0x00C6, //  LATIN CAPITAL LETTER AE
      0x00D0, //  LATIN CAPITAL LETTER ETH (Icelandic)
      0x00AA, //  FEMININE ORDINAL INDICATOR
      0x0126, //  LATIN CAPITAL LETTER H WITH STROKE
      0x0132, //  LATIN CAPITAL LIGATURE IJ
      0x013F, //  LATIN CAPITAL LETTER L WITH MIDDLE DOT
      0x0141, //  LATIN CAPITAL LETTER L WITH STROKE
      0x00D8, //  LATIN CAPITAL LETTER O WITH STROKE
      0x0152, //  LATIN CAPITAL LIGATURE OE
      0x00BA, //  MASCULINE ORDINAL INDICATOR
      0x00DE, //  LATIN CAPITAL LETTER THORN (Icelandic)
      0x0166, //  LATIN CAPITAL LETTER T WITH STROKE
      0x014A, //  LATIN CAPITAL LETTER ENG (Sami)
      0x0149, //  LATIN SMALL LETTER N PRECEDED BY APOSTROPHE
      0x0138, //  LATIN SMALL LETTER KRA (Greenlandic)
      0x00E6, //  LATIN SMALL LETTER AE
      0x0111, //  LATIN SMALL LETTER D WITH STROKE
      0x00F0, //  LATIN SMALL LETTER ETH (Icelandic)
      0x0127, //  LATIN SMALL LETTER H WITH STROKE
      0x0131, //  LATIN SMALL LETTER DOTLESS I
      0x0133, //  LATIN SMALL LIGATURE IJ
      0x0140, //  LATIN SMALL LETTER L WITH MIDDLE DOT
      0x0142, //  LATIN SMALL LETTER L WITH STROKE
      0x00F8, //  LATIN SMALL LETTER O WITH STROKE
      0x0153, //  LATIN SMALL LIGATURE OE
      0x00DF, //  LATIN SMALL LETTER SHARP S (German)
      0x00FE, //  LATIN SMALL LETTER THORN (Icelandic)
      0x0167, //  LATIN SMALL LETTER T WITH STROKE
      0x014B,  //  LATIN SMALL LETTER ENG (Sami)
      0x007F, // <delete>
    },
    {
      // VIDEOTEX-SUPPL
      // "ISO-IR-71"
      0x0020, // SPACE
      0xE101, //  MG01
      0xE102, //  MG02
      0xE103, //  MG03
      0xE104, //  MG04
      0xE105, //  MG05
      0xE106, //  MG06
      0xE107, //  MG07
      0xE108, //  MG08
      0xE109, //  MG09
      0xE10A, //  MG10
      0xE10B, //  MG11
      0xE10C, //  MG12
      0xE10D, //  MG13
      0xE10E, //  MG14
      0xE10F, //  MG15
      0xE110, //  MG16
      0xE111, //  MG17
      0xE112, //  MG18
      0xE113, //  MG19
      0xE114, //  MG20
      0xE115, //  MG21
      0xE116, //  MG22
      0xE117, //  MG23
      0xE118, //  MG24
      0xE119, //  MG25
      0xE11A, //  MG26
      0xE11B, //  MG27
      0xE11C, //  MG28
      0xE11D, //  MG29
      0xE11E, //  MG30
      0xE11F, //  MG31
      0xE201, //  SG01
      0xE202, //  SG02
      0xE203, //  SG03
      0xE204, //  SG04
      0xE205, //  SG05
      0xE206, //  SG06
      0xE207, //  SG07
      0xE208, //  SG08
      0xE209, //  SG09
      0xE20A, //  SG10
      0xE20B, //  SG11
      0xE20C, //  SG12
      0xE20D, //  SG13
      0xE20E, //  SG14
      0xE42D, //  SM45
      0xE320, //  DG32
      0xE21C, //  SG28
      0xE21b, //  SG27
      0xE21a, //  SG26
      0xE219, //  SG25
      0xE218, //  SG24
      0xE217, //  SG23
      0xE216, //  SG22
      0xE215, //  SG21
      0xE214, //  SG20
      0xE213, //  SG19
      0xE212, //  SG18
      0xE211, //  SG17
      0xE210, //  SG16
      0xE20f, //  SG15
      0xE32e, //  SM46
      0xE13f, //  MG63
      0xE120, //  MG32
      0xE121, //  MG33
      0xE122, //  MG34
      0xE123, //  MG35
      0xE124, //  MG36
      0xE125, //  MG37
      0xE126, //  MG38
      0xE127, //  MG39
      0xE128, //  MG40
      0xE129, //  MG41
      0xE12a, //  MG42
      0xE12b, //  MG43
      0xE12c, //  MG44
      0xE12d, //  MG45
      0xE12e, //  MG46
      0xE12f, //  MG47
      0xE130, //  MG48
      0xE131, //  MG49
      0xE132, //  MG50
      0xE133, //  MG51
      0xE134, //  MG52
      0xE135, //  MG53
      0xE136, //  MG54
      0xE137, //  MG55
      0xE138, //  MG56
      0xE139, //  MG57
      0xE13a, //  MG58
      0xE13b, //  MG59
      0xE13c, //  MG60
      0xE13d, //  MG61
      0xE13e, //  MG62
      0x007F, // <delete>
    },
    {
      // MOSAIC3
      // ISO-IR-72
      0x0020, // SPACE
      0xE220, //  SG32
      0xE221, //  SG33
      0xE222, //  SG34
      0xE223, //  SG35
      0xE224, //  SG36
      0xE225, //  SG37
      0xE226, //  SG38
      0xE227, //  SG39
      0xE228, //  SG40
      0xE229, //  SG41
      0xE22a, //  SG42
      0xE22b, //  SG43
      0xE22c, //  SG44
      0xE22d, //  SG45
      0xE22e, //  SG46
      0xE22f, //  SG47
      0xE230, //  SG48
      0xE231, //  SG49
      0xE232, //  SG50
      0xE233, //  SG51
      0xE234, //  SG52
      0xE235, //  SG53
      0xE236, //  SG54
      0xE237, //  SG55
      0xE238, //  SG56
      0xE239, //  SG57
      0xE23a, //  SG58
      0xE23b, //  SG59
      0xE23c, //  SG60
      0xE23d, //  SG61
      0xE23e, //  SG62
      0x007F, // <delete>
    }
  };




#line 1719 "ecma48.rl"



#line 458 "ecma48.c"
static const unsigned char _ECMA48_actions[] = {
	0, 1, 1, 1, 2, 1, 3, 1, 
	4, 1, 5, 1, 6, 1, 7, 1, 
	8, 1, 9, 1, 10, 1, 11, 1, 
	12, 1, 13, 1, 14, 1, 15, 1, 
	16, 1, 17, 1, 18, 1, 19, 1, 
	20, 1, 21, 1, 22, 1, 23, 1, 
	24, 1, 25, 1, 26, 1, 27, 1, 
	28, 1, 29, 1, 31, 1, 32, 1, 
	34, 1, 35, 1, 36, 1, 38, 1, 
	39, 1, 40, 1, 41, 1, 46, 1, 
	47, 1, 48, 1, 49, 1, 50, 1, 
	51, 1, 52, 1, 54, 1, 55, 1, 
	56, 1, 57, 1, 58, 1, 59, 1, 
	61, 1, 62, 1, 63, 1, 64, 1, 
	65, 1, 66, 1, 67, 1, 68, 1, 
	69, 1, 70, 1, 71, 1, 72, 1, 
	73, 1, 74, 1, 77, 1, 78, 1, 
	79, 1, 80, 1, 84, 1, 85, 1, 
	86, 1, 88, 1, 89, 1, 90, 1, 
	91, 1, 93, 1, 97, 1, 98, 1, 
	99, 1, 102, 1, 108, 1, 109, 1, 
	117, 1, 118, 1, 121, 1, 122, 1, 
	124, 1, 125, 1, 126, 1, 135, 1, 
	136, 1, 137, 1, 138, 1, 139, 1, 
	140, 1, 141, 2, 7, 140, 2, 9, 
	140, 2, 10, 140, 2, 11, 140, 2, 
	12, 140, 2, 13, 140, 2, 15, 140, 
	2, 16, 140, 2, 17, 140, 2, 18, 
	140, 2, 19, 140, 2, 20, 140, 2, 
	21, 140, 2, 22, 140, 2, 23, 140, 
	2, 24, 140, 2, 25, 108, 2, 30, 
	37, 2, 32, 140, 2, 33, 140, 2, 
	34, 140, 2, 35, 140, 2, 36, 140, 
	2, 38, 140, 2, 42, 140, 2, 43, 
	140, 2, 44, 140, 2, 45, 140, 2, 
	46, 140, 2, 47, 140, 2, 48, 140, 
	2, 52, 140, 2, 54, 140, 2, 60, 
	140, 2, 68, 140, 2, 72, 140, 2, 
	75, 140, 2, 76, 140, 2, 80, 140, 
	2, 81, 140, 2, 82, 140, 2, 83, 
	140, 2, 84, 140, 2, 87, 140, 2, 
	88, 140, 2, 91, 140, 2, 92, 140, 
	2, 94, 140, 2, 95, 140, 2, 96, 
	140, 2, 97, 140, 2, 98, 140, 2, 
	99, 140, 2, 100, 140, 2, 101, 140, 
	2, 102, 140, 2, 103, 140, 2, 104, 
	140, 2, 105, 140, 2, 106, 140, 2, 
	107, 131, 2, 107, 140, 2, 108, 2, 
	2, 108, 74, 2, 108, 79, 2, 108, 
	140, 2, 111, 140, 2, 112, 140, 2, 
	113, 140, 2, 114, 140, 2, 115, 140, 
	2, 116, 140, 2, 117, 140, 2, 119, 
	140, 2, 120, 140, 2, 123, 140, 2, 
	125, 140, 2, 128, 140, 2, 129, 140, 
	2, 130, 140, 2, 133, 140, 2, 134, 
	140, 2, 135, 140, 2, 136, 140, 2, 
	137, 140, 2, 140, 1, 2, 140, 3, 
	2, 140, 4, 2, 140, 5, 2, 140, 
	6, 2, 140, 8, 2, 140, 14, 2, 
	140, 26, 2, 140, 27, 2, 140, 28, 
	2, 140, 29, 2, 140, 31, 2, 140, 
	39, 2, 140, 40, 2, 140, 41, 2, 
	140, 49, 2, 140, 50, 2, 140, 51, 
	2, 140, 56, 2, 140, 57, 2, 140, 
	58, 2, 140, 59, 2, 140, 61, 2, 
	140, 62, 2, 140, 63, 2, 140, 69, 
	2, 140, 70, 2, 140, 71, 2, 140, 
	73, 2, 140, 77, 2, 140, 78, 2, 
	140, 85, 2, 140, 86, 2, 140, 89, 
	2, 140, 109, 2, 140, 118, 2, 140, 
	124, 2, 140, 126, 2, 140, 138, 2, 
	140, 139, 2, 141, 0, 2, 141, 140, 
	3, 30, 37, 140, 3, 53, 127, 140, 
	3, 101, 140, 1, 3, 101, 140, 3, 
	3, 101, 140, 4, 3, 101, 140, 5, 
	3, 101, 140, 6, 3, 101, 140, 8, 
	3, 101, 140, 14, 3, 101, 140, 26, 
	3, 101, 140, 27, 3, 101, 140, 28, 
	3, 101, 140, 29, 3, 101, 140, 31, 
	3, 101, 140, 39, 3, 101, 140, 40, 
	3, 101, 140, 41, 3, 101, 140, 49, 
	3, 101, 140, 50, 3, 101, 140, 51, 
	3, 101, 140, 56, 3, 101, 140, 57, 
	3, 101, 140, 58, 3, 101, 140, 59, 
	3, 101, 140, 61, 3, 101, 140, 62, 
	3, 101, 140, 63, 3, 101, 140, 69, 
	3, 101, 140, 70, 3, 101, 140, 71, 
	3, 101, 140, 73, 3, 101, 140, 77, 
	3, 101, 140, 78, 3, 101, 140, 85, 
	3, 101, 140, 86, 3, 101, 140, 89, 
	3, 101, 140, 109, 3, 101, 140, 118, 
	3, 101, 140, 124, 3, 101, 140, 126, 
	3, 101, 140, 138, 3, 101, 140, 139, 
	3, 107, 131, 140, 3, 108, 101, 140, 
	3, 110, 132, 140, 3, 141, 0, 140
	
};

static const short _ECMA48_key_offsets[] = {
	0, 0, 4, 10, 14, 20, 22, 56, 
	58, 60, 66, 67, 70, 74, 81, 90, 
	97, 106, 111, 147, 152, 157, 164, 168, 
	175, 182, 186, 193, 197, 204, 208, 212, 
	218, 219, 225, 226, 232, 233, 289, 344, 
	449, 542, 598, 704, 773, 838, 905, 963, 
	1019, 1125, 1218, 1274, 1380, 1449, 1514, 1581, 
	1639
};

static const unsigned char _ECMA48_trans_keys[] = {
	9u, 13u, 32u, 126u, 2u, 23u, 9u, 13u, 
	32u, 126u, 9u, 13u, 32u, 126u, 3u, 23u, 
	9u, 13u, 32u, 126u, 1u, 2u, 66u, 67u, 
	69u, 70u, 71u, 72u, 73u, 74u, 75u, 76u, 
	77u, 78u, 79u, 80u, 81u, 82u, 83u, 84u, 
	85u, 86u, 87u, 88u, 90u, 91u, 92u, 93u, 
	94u, 95u, 97u, 99u, 110u, 111u, 124u, 126u, 
	33u, 126u, 33u, 126u, 27u, 156u, 8u, 13u, 
	32u, 126u, 92u, 27u, 152u, 156u, 27u, 92u, 
	152u, 156u, 27u, 152u, 156u, 9u, 13u, 32u, 
	126u, 2u, 23u, 27u, 152u, 156u, 9u, 13u, 
	32u, 126u, 27u, 152u, 156u, 9u, 13u, 32u, 
	126u, 3u, 23u, 27u, 152u, 156u, 9u, 13u, 
	32u, 126u, 1u, 2u, 27u, 152u, 156u, 27u, 
	66u, 67u, 69u, 70u, 71u, 72u, 73u, 74u, 
	75u, 76u, 77u, 78u, 79u, 80u, 81u, 82u, 
	83u, 84u, 85u, 86u, 87u, 90u, 91u, 92u, 
	93u, 94u, 95u, 97u, 99u, 110u, 111u, 124u, 
	126u, 152u, 156u, 27u, 152u, 156u, 33u, 126u, 
	27u, 152u, 156u, 33u, 126u, 27u, 152u, 156u, 
	8u, 13u, 32u, 126u, 27u, 92u, 152u, 156u, 
	27u, 152u, 156u, 8u, 13u, 32u, 126u, 27u, 
	152u, 156u, 8u, 13u, 32u, 126u, 27u, 92u, 
	152u, 156u, 27u, 152u, 156u, 8u, 13u, 32u, 
	126u, 27u, 92u, 152u, 156u, 27u, 152u, 156u, 
	8u, 13u, 32u, 126u, 27u, 92u, 152u, 156u, 
	8u, 13u, 32u, 126u, 27u, 156u, 8u, 13u, 
	32u, 126u, 92u, 27u, 156u, 8u, 13u, 32u, 
	126u, 92u, 27u, 156u, 8u, 13u, 32u, 126u, 
	92u, 0u, 1u, 2u, 6u, 7u, 8u, 9u, 
	10u, 11u, 12u, 13u, 14u, 15u, 16u, 17u, 
	18u, 19u, 20u, 24u, 25u, 26u, 27u, 28u, 
	29u, 30u, 31u, 130u, 131u, 133u, 134u, 135u, 
	136u, 137u, 138u, 139u, 140u, 141u, 142u, 143u, 
	144u, 145u, 146u, 147u, 148u, 149u, 150u, 151u, 
	152u, 154u, 155u, 156u, 157u, 158u, 159u, 32u, 
	126u, 0u, 1u, 2u, 6u, 7u, 8u, 9u, 
	10u, 11u, 12u, 13u, 14u, 15u, 16u, 17u, 
	18u, 19u, 20u, 24u, 25u, 26u, 27u, 28u, 
	29u, 30u, 31u, 130u, 131u, 133u, 134u, 135u, 
	136u, 137u, 138u, 139u, 140u, 141u, 142u, 143u, 
	144u, 145u, 146u, 147u, 148u, 149u, 150u, 151u, 
	154u, 155u, 156u, 157u, 158u, 159u, 32u, 126u, 
	0u, 1u, 2u, 6u, 7u, 8u, 9u, 10u, 
	11u, 12u, 13u, 14u, 15u, 16u, 17u, 18u, 
	19u, 20u, 24u, 25u, 26u, 27u, 28u, 29u, 
	30u, 31u, 32u, 59u, 64u, 65u, 66u, 67u, 
	68u, 69u, 70u, 71u, 72u, 73u, 74u, 75u, 
	76u, 77u, 79u, 80u, 81u, 82u, 83u, 84u, 
	85u, 86u, 87u, 88u, 89u, 90u, 91u, 92u, 
	93u, 94u, 96u, 97u, 98u, 99u, 100u, 101u, 
	103u, 105u, 106u, 107u, 108u, 109u, 110u, 111u, 
	130u, 131u, 133u, 134u, 135u, 136u, 137u, 138u, 
	139u, 140u, 141u, 142u, 143u, 144u, 145u, 146u, 
	147u, 148u, 149u, 150u, 151u, 154u, 155u, 156u, 
	157u, 158u, 159u, 33u, 47u, 48u, 57u, 58u, 
	126u, 0u, 1u, 2u, 6u, 7u, 8u, 9u, 
	10u, 11u, 12u, 13u, 14u, 15u, 16u, 17u, 
	18u, 19u, 20u, 24u, 25u, 26u, 27u, 28u, 
	29u, 30u, 31u, 64u, 65u, 66u, 68u, 69u, 
	70u, 71u, 72u, 73u, 74u, 76u, 80u, 81u, 
	82u, 84u, 85u, 86u, 87u, 88u, 89u, 90u, 
	91u, 92u, 94u, 95u, 96u, 97u, 98u, 99u, 
	100u, 101u, 102u, 103u, 104u, 105u, 106u, 107u, 
	130u, 131u, 133u, 134u, 135u, 136u, 137u, 138u, 
	139u, 140u, 141u, 142u, 143u, 144u, 145u, 146u, 
	147u, 148u, 149u, 150u, 151u, 152u, 154u, 155u, 
	156u, 157u, 158u, 159u, 32u, 126u, 0u, 1u, 
	2u, 6u, 7u, 8u, 9u, 10u, 11u, 12u, 
	13u, 14u, 15u, 16u, 17u, 18u, 19u, 20u, 
	24u, 25u, 26u, 27u, 28u, 29u, 30u, 31u, 
	130u, 131u, 133u, 134u, 135u, 136u, 137u, 138u, 
	139u, 140u, 141u, 142u, 143u, 144u, 145u, 146u, 
	147u, 148u, 149u, 150u, 151u, 152u, 154u, 155u, 
	156u, 157u, 158u, 159u, 32u, 126u, 0u, 1u, 
	2u, 6u, 7u, 8u, 9u, 10u, 11u, 12u, 
	13u, 14u, 15u, 16u, 17u, 18u, 19u, 20u, 
	24u, 25u, 26u, 27u, 28u, 29u, 30u, 31u, 
	32u, 59u, 64u, 65u, 66u, 67u, 68u, 69u, 
	70u, 71u, 72u, 73u, 74u, 75u, 76u, 77u, 
	79u, 80u, 81u, 82u, 83u, 84u, 85u, 86u, 
	87u, 88u, 89u, 90u, 91u, 92u, 93u, 94u, 
	96u, 97u, 98u, 99u, 100u, 101u, 103u, 105u, 
	106u, 107u, 108u, 109u, 110u, 111u, 130u, 131u, 
	133u, 134u, 135u, 136u, 137u, 138u, 139u, 140u, 
	141u, 142u, 143u, 144u, 145u, 146u, 147u, 148u, 
	149u, 150u, 151u, 152u, 154u, 155u, 156u, 157u, 
	158u, 159u, 33u, 47u, 48u, 57u, 58u, 126u, 
	0u, 1u, 2u, 6u, 7u, 8u, 9u, 10u, 
	11u, 12u, 13u, 14u, 15u, 16u, 17u, 18u, 
	19u, 20u, 24u, 25u, 26u, 27u, 28u, 29u, 
	30u, 31u, 32u, 59u, 72u, 82u, 87u, 103u, 
	108u, 109u, 111u, 130u, 131u, 133u, 134u, 135u, 
	136u, 137u, 138u, 139u, 140u, 141u, 142u, 143u, 
	144u, 145u, 146u, 147u, 148u, 149u, 150u, 151u, 
	152u, 154u, 155u, 156u, 157u, 158u, 159u, 33u, 
	47u, 48u, 57u, 58u, 126u, 0u, 1u, 2u, 
	6u, 7u, 8u, 9u, 10u, 11u, 12u, 13u, 
	14u, 15u, 16u, 17u, 18u, 19u, 20u, 24u, 
	25u, 26u, 27u, 28u, 29u, 30u, 31u, 66u, 
	68u, 70u, 71u, 72u, 84u, 89u, 99u, 107u, 
	130u, 131u, 133u, 134u, 135u, 136u, 137u, 138u, 
	139u, 140u, 141u, 142u, 143u, 144u, 145u, 146u, 
	147u, 148u, 149u, 150u, 151u, 152u, 154u, 155u, 
	156u, 157u, 158u, 159u, 32u, 126u, 0u, 1u, 
	2u, 6u, 7u, 8u, 9u, 10u, 11u, 12u, 
	13u, 14u, 15u, 16u, 17u, 18u, 19u, 20u, 
	24u, 25u, 26u, 27u, 28u, 29u, 30u, 31u, 
	32u, 58u, 87u, 103u, 108u, 109u, 111u, 130u, 
	131u, 133u, 134u, 135u, 136u, 137u, 138u, 139u, 
	140u, 141u, 142u, 143u, 144u, 145u, 146u, 147u, 
	148u, 149u, 150u, 151u, 152u, 154u, 155u, 156u, 
	157u, 158u, 159u, 33u, 47u, 48u, 59u, 60u, 
	126u, 0u, 1u, 2u, 6u, 7u, 8u, 9u, 
	10u, 11u, 12u, 13u, 14u, 15u, 16u, 17u, 
	18u, 19u, 20u, 24u, 25u, 26u, 27u, 28u, 
	29u, 30u, 31u, 70u, 72u, 130u, 131u, 133u, 
	134u, 135u, 136u, 137u, 138u, 139u, 140u, 141u, 
	142u, 143u, 144u, 145u, 146u, 147u, 148u, 149u, 
	150u, 151u, 152u, 154u, 155u, 156u, 157u, 158u, 
	159u, 32u, 126u, 0u, 1u, 2u, 6u, 7u, 
	8u, 9u, 10u, 11u, 12u, 13u, 14u, 15u, 
	16u, 17u, 18u, 19u, 20u, 24u, 25u, 26u, 
	27u, 28u, 29u, 30u, 31u, 130u, 131u, 133u, 
	134u, 135u, 136u, 137u, 138u, 139u, 140u, 141u, 
	142u, 143u, 144u, 145u, 146u, 147u, 148u, 149u, 
	150u, 151u, 152u, 154u, 155u, 156u, 157u, 158u, 
	159u, 32u, 126u, 0u, 1u, 2u, 6u, 7u, 
	8u, 9u, 10u, 11u, 12u, 13u, 14u, 15u, 
	16u, 17u, 18u, 19u, 20u, 24u, 25u, 26u, 
	27u, 28u, 29u, 30u, 31u, 32u, 59u, 64u, 
	65u, 66u, 67u, 68u, 69u, 70u, 71u, 72u, 
	73u, 74u, 75u, 76u, 77u, 79u, 80u, 81u, 
	82u, 83u, 84u, 85u, 86u, 87u, 88u, 89u, 
	90u, 91u, 92u, 93u, 94u, 96u, 97u, 98u, 
	99u, 100u, 101u, 103u, 105u, 106u, 107u, 108u, 
	109u, 110u, 111u, 130u, 131u, 133u, 134u, 135u, 
	136u, 137u, 138u, 139u, 140u, 141u, 142u, 143u, 
	144u, 145u, 146u, 147u, 148u, 149u, 150u, 151u, 
	152u, 154u, 155u, 156u, 157u, 158u, 159u, 33u, 
	47u, 48u, 57u, 58u, 126u, 0u, 1u, 2u, 
	6u, 7u, 8u, 9u, 10u, 11u, 12u, 13u, 
	14u, 15u, 16u, 17u, 18u, 19u, 20u, 24u, 
	25u, 26u, 27u, 28u, 29u, 30u, 31u, 64u, 
	65u, 66u, 68u, 69u, 70u, 71u, 72u, 73u, 
	74u, 76u, 80u, 81u, 82u, 84u, 85u, 86u, 
	87u, 88u, 89u, 90u, 91u, 92u, 94u, 95u, 
	96u, 97u, 98u, 99u, 100u, 101u, 102u, 103u, 
	104u, 105u, 106u, 107u, 130u, 131u, 133u, 134u, 
	135u, 136u, 137u, 138u, 139u, 140u, 141u, 142u, 
	143u, 144u, 145u, 146u, 147u, 148u, 149u, 150u, 
	151u, 152u, 154u, 155u, 156u, 157u, 158u, 159u, 
	32u, 126u, 0u, 1u, 2u, 6u, 7u, 8u, 
	9u, 10u, 11u, 12u, 13u, 14u, 15u, 16u, 
	17u, 18u, 19u, 20u, 24u, 25u, 26u, 27u, 
	28u, 29u, 30u, 31u, 130u, 131u, 133u, 134u, 
	135u, 136u, 137u, 138u, 139u, 140u, 141u, 142u, 
	143u, 144u, 145u, 146u, 147u, 148u, 149u, 150u, 
	151u, 152u, 154u, 155u, 156u, 157u, 158u, 159u, 
	32u, 126u, 0u, 1u, 2u, 6u, 7u, 8u, 
	9u, 10u, 11u, 12u, 13u, 14u, 15u, 16u, 
	17u, 18u, 19u, 20u, 24u, 25u, 26u, 27u, 
	28u, 29u, 30u, 31u, 32u, 59u, 64u, 65u, 
	66u, 67u, 68u, 69u, 70u, 71u, 72u, 73u, 
	74u, 75u, 76u, 77u, 79u, 80u, 81u, 82u, 
	83u, 84u, 85u, 86u, 87u, 88u, 89u, 90u, 
	91u, 92u, 93u, 94u, 96u, 97u, 98u, 99u, 
	100u, 101u, 103u, 105u, 106u, 107u, 108u, 109u, 
	110u, 111u, 130u, 131u, 133u, 134u, 135u, 136u, 
	137u, 138u, 139u, 140u, 141u, 142u, 143u, 144u, 
	145u, 146u, 147u, 148u, 149u, 150u, 151u, 152u, 
	154u, 155u, 156u, 157u, 158u, 159u, 33u, 47u, 
	48u, 57u, 58u, 126u, 0u, 1u, 2u, 6u, 
	7u, 8u, 9u, 10u, 11u, 12u, 13u, 14u, 
	15u, 16u, 17u, 18u, 19u, 20u, 24u, 25u, 
	26u, 27u, 28u, 29u, 30u, 31u, 32u, 59u, 
	72u, 82u, 87u, 103u, 108u, 109u, 111u, 130u, 
	131u, 133u, 134u, 135u, 136u, 137u, 138u, 139u, 
	140u, 141u, 142u, 143u, 144u, 145u, 146u, 147u, 
	148u, 149u, 150u, 151u, 152u, 154u, 155u, 156u, 
	157u, 158u, 159u, 33u, 47u, 48u, 57u, 58u, 
	126u, 0u, 1u, 2u, 6u, 7u, 8u, 9u, 
	10u, 11u, 12u, 13u, 14u, 15u, 16u, 17u, 
	18u, 19u, 20u, 24u, 25u, 26u, 27u, 28u, 
	29u, 30u, 31u, 66u, 68u, 70u, 71u, 72u, 
	84u, 89u, 99u, 107u, 130u, 131u, 133u, 134u, 
	135u, 136u, 137u, 138u, 139u, 140u, 141u, 142u, 
	143u, 144u, 145u, 146u, 147u, 148u, 149u, 150u, 
	151u, 152u, 154u, 155u, 156u, 157u, 158u, 159u, 
	32u, 126u, 0u, 1u, 2u, 6u, 7u, 8u, 
	9u, 10u, 11u, 12u, 13u, 14u, 15u, 16u, 
	17u, 18u, 19u, 20u, 24u, 25u, 26u, 27u, 
	28u, 29u, 30u, 31u, 32u, 58u, 87u, 103u, 
	108u, 109u, 111u, 130u, 131u, 133u, 134u, 135u, 
	136u, 137u, 138u, 139u, 140u, 141u, 142u, 143u, 
	144u, 145u, 146u, 147u, 148u, 149u, 150u, 151u, 
	152u, 154u, 155u, 156u, 157u, 158u, 159u, 33u, 
	47u, 48u, 59u, 60u, 126u, 0u, 1u, 2u, 
	6u, 7u, 8u, 9u, 10u, 11u, 12u, 13u, 
	14u, 15u, 16u, 17u, 18u, 19u, 20u, 24u, 
	25u, 26u, 27u, 28u, 29u, 30u, 31u, 70u, 
	72u, 130u, 131u, 133u, 134u, 135u, 136u, 137u, 
	138u, 139u, 140u, 141u, 142u, 143u, 144u, 145u, 
	146u, 147u, 148u, 149u, 150u, 151u, 152u, 154u, 
	155u, 156u, 157u, 158u, 159u, 32u, 126u, 0u, 
	1u, 2u, 6u, 7u, 8u, 9u, 10u, 11u, 
	12u, 13u, 14u, 15u, 16u, 17u, 18u, 19u, 
	20u, 24u, 25u, 26u, 27u, 28u, 29u, 30u, 
	31u, 130u, 131u, 133u, 134u, 135u, 136u, 137u, 
	138u, 139u, 140u, 141u, 142u, 143u, 144u, 145u, 
	146u, 147u, 148u, 149u, 150u, 151u, 152u, 154u, 
	155u, 156u, 157u, 158u, 159u, 32u, 126u, 0
};

static const char _ECMA48_single_lengths[] = {
	0, 0, 2, 0, 2, 2, 34, 0, 
	0, 2, 1, 3, 4, 3, 5, 3, 
	5, 5, 36, 3, 3, 3, 4, 3, 
	3, 4, 3, 4, 3, 4, 0, 2, 
	1, 2, 1, 2, 1, 54, 53, 99, 
	91, 54, 100, 63, 63, 61, 56, 54, 
	100, 91, 54, 100, 63, 63, 61, 56, 
	54
};

static const char _ECMA48_range_lengths[] = {
	0, 2, 2, 2, 2, 0, 0, 1, 
	1, 2, 0, 0, 0, 2, 2, 2, 
	2, 0, 0, 1, 1, 2, 0, 2, 
	2, 0, 2, 0, 2, 0, 2, 2, 
	0, 2, 0, 2, 0, 1, 1, 3, 
	1, 1, 3, 3, 1, 3, 1, 1, 
	3, 1, 1, 3, 3, 1, 3, 1, 
	1
};

static const short _ECMA48_index_offsets[] = {
	0, 0, 3, 8, 11, 16, 19, 54, 
	56, 58, 63, 65, 69, 74, 80, 88, 
	94, 102, 108, 145, 150, 155, 161, 166, 
	172, 178, 183, 189, 194, 200, 205, 208, 
	213, 215, 220, 222, 227, 229, 285, 340, 
	443, 536, 592, 696, 763, 828, 893, 951, 
	1007, 1111, 1204, 1260, 1364, 1431, 1496, 1561, 
	1619
};

static const char _ECMA48_trans_targs[] = {
	2, 2, 0, 3, 5, 2, 2, 0, 
	4, 4, 0, 37, 3, 4, 4, 0, 
	1, 3, 0, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 7, 8, 
	9, 37, 37, 37, 37, 37, 37, 37, 
	11, 30, 48, 37, 31, 33, 35, 37, 
	37, 37, 37, 37, 37, 0, 37, 0, 
	37, 0, 10, 37, 9, 9, 0, 37, 
	0, 12, 0, 37, 11, 12, 38, 0, 
	37, 11, 12, 0, 37, 14, 14, 11, 
	15, 17, 12, 0, 37, 14, 14, 11, 
	12, 0, 37, 16, 16, 11, 38, 15, 
	12, 0, 37, 16, 16, 11, 13, 15, 
	12, 0, 37, 11, 12, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	19, 20, 21, 38, 38, 38, 38, 38, 
	38, 38, 23, 39, 38, 24, 26, 28, 
	38, 38, 38, 38, 38, 38, 0, 37, 
	11, 12, 0, 37, 38, 11, 12, 0, 
	37, 38, 11, 22, 0, 37, 21, 21, 
	11, 12, 38, 0, 37, 11, 12, 0, 
	37, 38, 38, 11, 25, 0, 37, 24, 
	24, 11, 12, 38, 0, 37, 11, 27, 
	0, 37, 26, 26, 11, 12, 38, 0, 
	37, 11, 29, 0, 37, 28, 28, 11, 
	12, 38, 0, 37, 11, 37, 37, 0, 
	32, 37, 31, 31, 0, 37, 0, 34, 
	37, 33, 33, 0, 37, 0, 36, 37, 
	35, 35, 0, 37, 0, 37, 1, 3, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 6, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 7, 8, 9, 37, 37, 37, 
	37, 37, 37, 37, 11, 30, 48, 37, 
	31, 33, 35, 50, 0, 38, 13, 15, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 18, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 19, 20, 21, 38, 38, 38, 
	38, 38, 38, 38, 23, 39, 37, 24, 
	26, 28, 41, 11, 38, 13, 15, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 18, 38, 38, 38, 38, 40, 43, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 47, 41, 41, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 19, 
	20, 21, 38, 38, 38, 38, 38, 38, 
	38, 23, 39, 37, 24, 26, 28, 41, 
	42, 41, 11, 38, 13, 15, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	18, 38, 38, 38, 38, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 19, 20, 21, 
	38, 38, 38, 38, 38, 38, 38, 11, 
	23, 39, 37, 24, 26, 28, 41, 11, 
	38, 13, 15, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 18, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 19, 20, 21, 
	38, 38, 38, 38, 38, 38, 38, 11, 
	23, 39, 37, 24, 26, 28, 41, 11, 
	38, 13, 15, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 18, 38, 38, 
	38, 38, 40, 43, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 41, 41, 
	41, 41, 41, 41, 41, 47, 41, 41, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 19, 20, 21, 38, 38, 
	38, 38, 38, 38, 38, 11, 23, 39, 
	37, 24, 26, 28, 41, 42, 41, 11, 
	38, 13, 15, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 18, 38, 38, 
	38, 38, 44, 45, 41, 41, 41, 41, 
	41, 47, 41, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 19, 20, 
	21, 38, 38, 38, 38, 38, 38, 38, 
	11, 23, 39, 37, 24, 26, 28, 41, 
	43, 41, 11, 38, 13, 15, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	18, 38, 38, 38, 38, 41, 41, 41, 
	41, 41, 41, 41, 41, 41, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 19, 20, 21, 38, 38, 38, 38, 
	38, 38, 38, 11, 23, 39, 37, 24, 
	26, 28, 41, 11, 38, 13, 15, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 18, 38, 38, 38, 38, 46, 41, 
	41, 41, 41, 47, 41, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	19, 20, 21, 38, 38, 38, 38, 38, 
	38, 38, 11, 23, 39, 37, 24, 26, 
	28, 41, 45, 41, 11, 38, 13, 15, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 18, 38, 38, 38, 38, 41, 
	41, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 19, 20, 21, 38, 
	38, 38, 38, 38, 38, 38, 11, 23, 
	39, 37, 24, 26, 28, 41, 11, 38, 
	13, 15, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 18, 38, 38, 38, 
	38, 38, 38, 38, 38, 38, 38, 38, 
	38, 38, 38, 38, 19, 20, 21, 38, 
	38, 38, 38, 38, 38, 38, 11, 23, 
	39, 37, 24, 26, 28, 41, 11, 37, 
	1, 3, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 6, 37, 37, 37, 
	37, 49, 52, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 56, 50, 50, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 7, 8, 9, 37, 37, 37, 
	37, 37, 37, 37, 11, 30, 48, 37, 
	31, 33, 35, 50, 51, 50, 0, 37, 
	1, 3, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 6, 37, 37, 37, 
	37, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 7, 8, 9, 37, 37, 37, 37, 
	37, 37, 37, 11, 30, 48, 37, 31, 
	33, 35, 50, 0, 37, 1, 3, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 6, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 7, 8, 9, 37, 37, 37, 37, 
	37, 37, 37, 11, 30, 48, 37, 31, 
	33, 35, 50, 0, 37, 1, 3, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 6, 37, 37, 37, 37, 49, 52, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 50, 50, 50, 50, 50, 50, 
	50, 56, 50, 50, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 7, 
	8, 9, 37, 37, 37, 37, 37, 37, 
	37, 11, 30, 48, 37, 31, 33, 35, 
	50, 51, 50, 0, 37, 1, 3, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 6, 37, 37, 37, 37, 53, 54, 
	50, 50, 50, 50, 50, 56, 50, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 7, 8, 9, 37, 37, 37, 
	37, 37, 37, 37, 11, 30, 48, 37, 
	31, 33, 35, 50, 52, 50, 0, 37, 
	1, 3, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 6, 37, 37, 37, 
	37, 50, 50, 50, 50, 50, 50, 50, 
	50, 50, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 7, 8, 9, 
	37, 37, 37, 37, 37, 37, 37, 11, 
	30, 48, 37, 31, 33, 35, 50, 0, 
	37, 1, 3, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 6, 37, 37, 
	37, 37, 55, 50, 50, 50, 50, 56, 
	50, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 7, 8, 9, 37, 
	37, 37, 37, 37, 37, 37, 11, 30, 
	48, 37, 31, 33, 35, 50, 54, 50, 
	0, 37, 1, 3, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 6, 37, 
	37, 37, 37, 50, 50, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	7, 8, 9, 37, 37, 37, 37, 37, 
	37, 37, 11, 30, 48, 37, 31, 33, 
	35, 50, 0, 37, 1, 3, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	6, 37, 37, 37, 37, 37, 37, 37, 
	37, 37, 37, 37, 37, 37, 37, 37, 
	7, 8, 9, 37, 37, 37, 37, 37, 
	37, 37, 11, 30, 48, 37, 31, 33, 
	35, 50, 0, 0
};

static const short _ECMA48_trans_actions[] = {
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 7, 121, 123, 169, 0, 
	87, 85, 189, 131, 133, 147, 0, 0, 
	0, 141, 143, 175, 15, 119, 165, 73, 
	0, 0, 0, 0, 0, 0, 0, 93, 
	149, 111, 113, 115, 109, 0, 171, 0, 
	173, 0, 0, 49, 0, 0, 0, 49, 
	0, 0, 0, 163, 0, 0, 163, 0, 
	163, 0, 0, 0, 163, 0, 0, 0, 
	0, 0, 0, 0, 163, 0, 0, 0, 
	0, 0, 163, 0, 0, 0, 0, 0, 
	0, 0, 163, 0, 0, 0, 0, 0, 
	0, 0, 163, 0, 0, 7, 121, 123, 
	169, 0, 87, 85, 189, 131, 133, 147, 
	0, 0, 0, 141, 143, 175, 15, 119, 
	165, 73, 0, 0, 163, 0, 0, 0, 
	93, 149, 111, 113, 115, 109, 0, 163, 
	0, 0, 0, 163, 171, 0, 0, 0, 
	163, 173, 0, 0, 0, 243, 0, 0, 
	0, 0, 243, 0, 163, 0, 0, 0, 
	163, 153, 153, 0, 0, 0, 384, 0, 
	0, 0, 0, 384, 0, 163, 0, 0, 
	0, 387, 0, 0, 0, 0, 387, 0, 
	163, 0, 0, 0, 381, 0, 0, 0, 
	0, 381, 0, 163, 0, 153, 153, 0, 
	0, 129, 0, 0, 0, 129, 0, 0, 
	135, 0, 0, 0, 135, 0, 0, 3, 
	0, 0, 0, 3, 0, 127, 0, 0, 
	1, 5, 9, 83, 103, 187, 75, 27, 
	105, 107, 59, 51, 53, 55, 57, 11, 
	71, 179, 0, 101, 99, 97, 95, 7, 
	121, 123, 169, 0, 87, 85, 189, 131, 
	133, 147, 0, 0, 0, 141, 143, 175, 
	15, 119, 165, 73, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 127, 0, 0, 
	1, 5, 9, 83, 103, 187, 75, 27, 
	105, 107, 59, 51, 53, 55, 57, 11, 
	71, 179, 0, 101, 99, 97, 95, 7, 
	121, 123, 169, 0, 87, 85, 189, 131, 
	133, 147, 0, 0, 0, 141, 143, 175, 
	15, 119, 165, 73, 0, 0, 163, 0, 
	0, 0, 0, 0, 127, 0, 0, 1, 
	5, 9, 83, 103, 187, 75, 27, 105, 
	107, 59, 51, 53, 55, 57, 11, 71, 
	179, 0, 101, 99, 97, 95, 0, 193, 
	89, 39, 33, 35, 31, 21, 23, 17, 
	37, 19, 67, 69, 91, 246, 63, 47, 
	159, 25, 177, 155, 125, 137, 29, 65, 
	41, 13, 167, 139, 157, 161, 77, 81, 
	145, 43, 181, 185, 375, 117, 79, 183, 
	151, 0, 61, 45, 7, 121, 123, 169, 
	0, 87, 85, 189, 131, 133, 147, 0, 
	0, 0, 141, 143, 175, 15, 119, 165, 
	73, 0, 0, 163, 0, 0, 0, 0, 
	570, 0, 0, 534, 191, 191, 450, 453, 
	459, 495, 516, 564, 492, 468, 519, 522, 
	483, 471, 474, 477, 480, 462, 486, 561, 
	191, 513, 510, 507, 504, 363, 405, 276, 
	270, 438, 294, 396, 324, 414, 306, 580, 
	312, 318, 315, 252, 366, 369, 267, 402, 
	354, 303, 417, 333, 420, 273, 432, 429, 
	426, 752, 435, 336, 408, 342, 372, 393, 
	399, 339, 456, 528, 531, 555, 191, 501, 
	498, 567, 537, 540, 549, 191, 191, 191, 
	543, 546, 558, 465, 525, 552, 489, 191, 
	191, 191, 390, 191, 191, 191, 191, 0, 
	534, 191, 191, 450, 453, 459, 495, 516, 
	564, 492, 468, 519, 522, 483, 471, 474, 
	477, 480, 462, 486, 561, 191, 513, 510, 
	507, 504, 456, 528, 531, 555, 191, 501, 
	498, 567, 537, 540, 549, 191, 191, 191, 
	543, 546, 558, 465, 525, 552, 489, 191, 
	191, 191, 390, 191, 191, 191, 191, 0, 
	534, 191, 191, 450, 453, 459, 495, 516, 
	564, 492, 468, 519, 522, 483, 471, 474, 
	477, 480, 462, 486, 561, 191, 513, 510, 
	507, 504, 191, 573, 288, 228, 219, 222, 
	216, 204, 207, 198, 225, 201, 261, 264, 
	291, 576, 255, 240, 351, 210, 423, 345, 
	300, 309, 213, 258, 231, 195, 411, 321, 
	348, 360, 279, 285, 327, 234, 441, 447, 
	744, 297, 282, 444, 330, 191, 249, 237, 
	456, 528, 531, 555, 191, 501, 498, 567, 
	537, 540, 549, 191, 191, 191, 543, 546, 
	558, 465, 525, 552, 489, 191, 191, 191, 
	390, 191, 191, 191, 191, 756, 191, 0, 
	534, 191, 191, 450, 453, 459, 495, 516, 
	564, 492, 468, 519, 522, 483, 471, 474, 
	477, 480, 462, 486, 561, 191, 513, 510, 
	507, 504, 191, 191, 225, 210, 213, 378, 
	330, 191, 237, 456, 528, 531, 555, 191, 
	501, 498, 567, 537, 540, 549, 191, 191, 
	191, 543, 546, 558, 465, 525, 552, 489, 
	191, 191, 191, 390, 191, 191, 191, 191, 
	573, 191, 0, 534, 191, 191, 450, 453, 
	459, 495, 516, 564, 492, 468, 519, 522, 
	483, 471, 474, 477, 480, 462, 486, 561, 
	191, 513, 510, 507, 504, 276, 270, 294, 
	396, 324, 252, 354, 752, 339, 456, 528, 
	531, 555, 191, 501, 498, 567, 537, 540, 
	549, 191, 191, 191, 543, 546, 558, 465, 
	525, 552, 489, 191, 191, 191, 390, 191, 
	191, 191, 191, 0, 534, 191, 191, 450, 
	453, 459, 495, 516, 564, 492, 468, 519, 
	522, 483, 471, 474, 477, 480, 462, 486, 
	561, 191, 513, 510, 507, 504, 191, 191, 
	213, 378, 330, 191, 237, 456, 528, 531, 
	555, 191, 501, 498, 567, 537, 540, 549, 
	191, 191, 191, 543, 546, 558, 465, 525, 
	552, 489, 191, 191, 191, 390, 191, 191, 
	191, 191, 191, 191, 0, 534, 191, 191, 
	450, 453, 459, 495, 516, 564, 492, 468, 
	519, 522, 483, 471, 474, 477, 480, 462, 
	486, 561, 191, 513, 510, 507, 504, 294, 
	324, 456, 528, 531, 555, 191, 501, 498, 
	567, 537, 540, 549, 191, 191, 191, 543, 
	546, 558, 465, 525, 552, 489, 191, 191, 
	191, 390, 191, 191, 191, 191, 0, 696, 
	357, 357, 584, 588, 596, 644, 672, 736, 
	640, 608, 676, 680, 628, 612, 616, 620, 
	624, 600, 632, 732, 357, 668, 664, 660, 
	656, 592, 688, 692, 724, 357, 652, 648, 
	740, 700, 704, 716, 357, 357, 357, 708, 
	712, 728, 604, 684, 720, 636, 357, 357, 
	357, 748, 357, 357, 357, 357, 0, 127, 
	0, 0, 1, 5, 9, 83, 103, 187, 
	75, 27, 105, 107, 59, 51, 53, 55, 
	57, 11, 71, 179, 0, 101, 99, 97, 
	95, 0, 193, 89, 39, 33, 35, 31, 
	21, 23, 17, 37, 19, 67, 69, 91, 
	246, 63, 47, 159, 25, 177, 155, 125, 
	137, 29, 65, 41, 13, 167, 139, 157, 
	161, 77, 81, 145, 43, 181, 185, 375, 
	117, 79, 183, 151, 0, 61, 45, 7, 
	121, 123, 169, 0, 87, 85, 189, 131, 
	133, 147, 0, 0, 0, 141, 143, 175, 
	15, 119, 165, 73, 0, 0, 0, 0, 
	0, 0, 0, 0, 570, 0, 0, 534, 
	191, 191, 450, 453, 459, 495, 516, 564, 
	492, 468, 519, 522, 483, 471, 474, 477, 
	480, 462, 486, 561, 191, 513, 510, 507, 
	504, 363, 405, 276, 270, 438, 294, 396, 
	324, 414, 306, 580, 312, 318, 315, 252, 
	366, 369, 267, 402, 354, 303, 417, 333, 
	420, 273, 432, 429, 426, 752, 435, 336, 
	408, 342, 372, 393, 399, 339, 456, 528, 
	531, 555, 191, 501, 498, 567, 537, 540, 
	549, 191, 191, 191, 543, 546, 558, 465, 
	525, 552, 489, 191, 191, 191, 191, 191, 
	191, 191, 191, 0, 534, 191, 191, 450, 
	453, 459, 495, 516, 564, 492, 468, 519, 
	522, 483, 471, 474, 477, 480, 462, 486, 
	561, 191, 513, 510, 507, 504, 456, 528, 
	531, 555, 191, 501, 498, 567, 537, 540, 
	549, 191, 191, 191, 543, 546, 558, 465, 
	525, 552, 489, 191, 191, 191, 191, 191, 
	191, 191, 191, 0, 534, 191, 191, 450, 
	453, 459, 495, 516, 564, 492, 468, 519, 
	522, 483, 471, 474, 477, 480, 462, 486, 
	561, 191, 513, 510, 507, 504, 191, 573, 
	288, 228, 219, 222, 216, 204, 207, 198, 
	225, 201, 261, 264, 291, 576, 255, 240, 
	351, 210, 423, 345, 300, 309, 213, 258, 
	231, 195, 411, 321, 348, 360, 279, 285, 
	327, 234, 441, 447, 744, 297, 282, 444, 
	330, 191, 249, 237, 456, 528, 531, 555, 
	191, 501, 498, 567, 537, 540, 549, 191, 
	191, 191, 543, 546, 558, 465, 525, 552, 
	489, 191, 191, 191, 191, 191, 191, 191, 
	191, 756, 191, 0, 534, 191, 191, 450, 
	453, 459, 495, 516, 564, 492, 468, 519, 
	522, 483, 471, 474, 477, 480, 462, 486, 
	561, 191, 513, 510, 507, 504, 191, 191, 
	225, 210, 213, 378, 330, 191, 237, 456, 
	528, 531, 555, 191, 501, 498, 567, 537, 
	540, 549, 191, 191, 191, 543, 546, 558, 
	465, 525, 552, 489, 191, 191, 191, 191, 
	191, 191, 191, 191, 573, 191, 0, 534, 
	191, 191, 450, 453, 459, 495, 516, 564, 
	492, 468, 519, 522, 483, 471, 474, 477, 
	480, 462, 486, 561, 191, 513, 510, 507, 
	504, 276, 270, 294, 396, 324, 252, 354, 
	752, 339, 456, 528, 531, 555, 191, 501, 
	498, 567, 537, 540, 549, 191, 191, 191, 
	543, 546, 558, 465, 525, 552, 489, 191, 
	191, 191, 191, 191, 191, 191, 191, 0, 
	534, 191, 191, 450, 453, 459, 495, 516, 
	564, 492, 468, 519, 522, 483, 471, 474, 
	477, 480, 462, 486, 561, 191, 513, 510, 
	507, 504, 191, 191, 213, 378, 330, 191, 
	237, 456, 528, 531, 555, 191, 501, 498, 
	567, 537, 540, 549, 191, 191, 191, 543, 
	546, 558, 465, 525, 552, 489, 191, 191, 
	191, 191, 191, 191, 191, 191, 191, 191, 
	0, 534, 191, 191, 450, 453, 459, 495, 
	516, 564, 492, 468, 519, 522, 483, 471, 
	474, 477, 480, 462, 486, 561, 191, 513, 
	510, 507, 504, 294, 324, 456, 528, 531, 
	555, 191, 501, 498, 567, 537, 540, 549, 
	191, 191, 191, 543, 546, 558, 465, 525, 
	552, 489, 191, 191, 191, 191, 191, 191, 
	191, 191, 0, 696, 357, 357, 584, 588, 
	596, 644, 672, 736, 640, 608, 676, 680, 
	628, 612, 616, 620, 624, 600, 632, 732, 
	357, 668, 664, 660, 656, 592, 688, 692, 
	724, 357, 652, 648, 740, 700, 704, 716, 
	357, 357, 357, 708, 712, 728, 604, 684, 
	720, 636, 357, 357, 357, 357, 357, 357, 
	357, 357, 0, 0
};

static const short _ECMA48_eof_actions[] = {
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	0, 0, 0, 0, 0, 0, 0, 0, 
	191, 191, 191, 191, 191, 191, 191, 357, 
	0, 191, 191, 191, 191, 191, 191, 191, 
	357
};

static const int ECMA48_start = 37;
static const int ECMA48_first_final = 37;
static const int ECMA48_error = 0;

static const int ECMA48_en_main = 37;


#line 1722 "ecma48.rl"

static unsigned char *p;
static unsigned char *pe;
static unsigned char *eof;
// static int cs;

int ecma48_init(void)
{
    // Writing moves right
    simd = 0;
    // overwrite, not insert
    irm = IRM_REPLACE;
    // inserting moves write
    hem = HEM_FOLLOWING;
    // inserting lines moves down
    vem = 0;
    // graphics rendition combining
    grcm = GRCM_COMBINING;
    // left edge of text is 1st column
    line_home = 1;
    // right endge of text is last column
    line_limit = CONSOLE_COLS;
    // top of page is 1st line
    page_home = 1;
    // bottom of page is last line
    page_limit = CONSOLE_ROWS;
    // parameter storage is cleared
    P_size = 0;
    
    
#line 1292 "ecma48.c"
	{
	cs = ECMA48_start;
	}

#line 1752 "ecma48.rl"
    return 1;
}

int ecma48_execute(const unsigned char *data, int len)
{
    p = (unsigned char *) data;
    pe = (unsigned char *)data + len;
    eof = pe;

    
#line 1308 "ecma48.c"
	{
	int _klen;
	unsigned int _trans;
	const unsigned char *_acts;
	unsigned int _nacts;
	const unsigned char *_keys;

	if ( p == pe )
		goto _test_eof;
	if ( cs == 0 )
		goto _out;
_resume:
	_keys = _ECMA48_trans_keys + _ECMA48_key_offsets[cs];
	_trans = _ECMA48_index_offsets[cs];

	_klen = _ECMA48_single_lengths[cs];
	if ( _klen > 0 ) {
		const unsigned char *_lower = _keys;
		const unsigned char *_mid;
		const unsigned char *_upper = _keys + _klen - 1;
		while (1) {
			if ( _upper < _lower )
				break;

			_mid = _lower + ((_upper-_lower) >> 1);
			if ( (*p) < *_mid )
				_upper = _mid - 1;
			else if ( (*p) > *_mid )
				_lower = _mid + 1;
			else {
				_trans += (unsigned int)(_mid - _keys);
				goto _match;
			}
		}
		_keys += _klen;
		_trans += _klen;
	}

	_klen = _ECMA48_range_lengths[cs];
	if ( _klen > 0 ) {
		const unsigned char *_lower = _keys;
		const unsigned char *_mid;
		const unsigned char *_upper = _keys + (_klen<<1) - 2;
		while (1) {
			if ( _upper < _lower )
				break;

			_mid = _lower + (((_upper-_lower) >> 1) & ~1);
			if ( (*p) < _mid[0] )
				_upper = _mid - 2;
			else if ( (*p) > _mid[1] )
				_lower = _mid + 2;
			else {
				_trans += (unsigned int)((_mid - _keys)>>1);
				goto _match;
			}
		}
		_trans += _klen;
	}

_match:
	cs = _ECMA48_trans_targs[_trans];

	if ( _ECMA48_trans_actions[_trans] == 0 )
		goto _again;

	_acts = _ECMA48_actions + _ECMA48_trans_actions[_trans];
	_nacts = (unsigned int) *_acts++;
	while ( _nacts-- > 0 )
	{
		switch ( *_acts++ )
		{
	case 0:
#line 481 "ecma48.rl"
	{
    /* Store sole numeric parameter */
  }
	break;
	case 1:
#line 489 "ecma48.rl"
	{
    // ACK - ACKNOWLEDGE.  If the console receives ACK, it ignores it.
  }
	break;
	case 2:
#line 493 "ecma48.rl"
	{
    // APC - APPLICATION PROGRAM COMMAND.  For now, the console
    // doesn't have any program commands to which is responds.
  }
	break;
	case 3:
#line 498 "ecma48.rl"
	{
    // BEL - BELL.
    console_bell();
  }
	break;
	case 4:
#line 503 "ecma48.rl"
	{
    // BPH - BREAK PERMITTED HERE.  This console doesn't auto-wrap, so
    // this is ignored.
  }
	break;
	case 5:
#line 508 "ecma48.rl"
	{
    // BS - BACKSPACE.  Moves the active data position one character position
    // in the direction opposite of the implicit movement.
    if (simd == 0)
      console_move_left(1);
    else
      console_move_right(1);
  }
	break;
	case 6:
#line 517 "ecma48.rl"
	{
    // CAN - CANCEL.  Undo previous.
  }
	break;
	case 7:
#line 521 "ecma48.rl"
	{
    // CBT - CURSOR BACKWARD TABULATION.
    console_move_tab_left(p1(1));
  }
	break;
	case 8:
#line 526 "ecma48.rl"
	{
    // CCH - CANCEL CHARACTER.  Undo previous byte if it is a graphic
    // character.
  }
	break;
	case 9:
#line 531 "ecma48.rl"
	{
    // CHA - CURSOR CHARACTER ABSOLUTE.
    console_move_to_column(p1(1)-1);	// ECMA-48 coords start at 1.
  }
	break;
	case 10:
#line 536 "ecma48.rl"
	{
    // CHT - CURSOR FORWARD TABULATION
    console_move_tab_right(p1(1));
  }
	break;
	case 11:
#line 541 "ecma48.rl"
	{
    // CNL - CURSOR NEXT LINE
    console_move_to_column(0);
    console_move_down(p1(1));
  }
	break;
	case 12:
#line 547 "ecma48.rl"
	{
    // CPL - CURSOR PRECEDING LINE
    console_move_to_column(0);
    console_move_up(p1(1));
  }
	break;
	case 13:
#line 553 "ecma48.rl"
	{
    // CPR - ACTIVE POSITION REPORT.  The console ignores position
    // reports that it receives the input stream.
  }
	break;
	case 14:
#line 558 "ecma48.rl"
	{
    // CR - CARRIAGE RETURN.
    if (simd == 0)
      console_move_to_column(line_home - 1); // ECMA48 coords begin at 1
    else if (simd == 1)
      console_move_to_column(line_limit - 1); // ECMA48 coords begin at 1
  }
	break;
	case 15:
#line 566 "ecma48.rl"
	{
    // CTC - CURSOR TABULATION CONTROL.  For now, tabs are fixed, so these
    // commands are ignored.
  }
	break;
	case 16:
#line 571 "ecma48.rl"
	{
    // CUB - CURSOR LEFT.
    console_move_left(p1(1));
  }
	break;
	case 17:
#line 576 "ecma48.rl"
	{
    // CUD - CURSOR DOWN.
    console_move_down(p1(1));
  }
	break;
	case 18:
#line 581 "ecma48.rl"
	{
    // CUF - CURSOR RIGHT
    console_move_right(p1(1));
  }
	break;
	case 19:
#line 586 "ecma48.rl"
	{
    // CUP - CURSOR POSITION
    console_move_to(p1(1) - 1, p2(1) - 1); // ECMA-48 coords begin at 1
  }
	break;
	case 20:
#line 591 "ecma48.rl"
	{
    // CUU - CURSOR UP
    console_move_up(p1(1));
  }
	break;
	case 21:
#line 596 "ecma48.rl"
	{
    // CVT - CURSOR LINE TABULATION
    console_move_vertical_tab_down(p1(1));
  }
	break;
	case 22:
#line 601 "ecma48.rl"
	{
    // DA - DEVICE ATTRIBUTES.  The console ignores DA messages from the
    // data stream, and doesn't respond.
  }
	break;
	case 23:
#line 606 "ecma48.rl"
	{
    // DAQ - DEFINE AREA QUALIFICATION.  This is too complicated.
  }
	break;
	case 24:
#line 610 "ecma48.rl"
	{
    // DCH - DELETE CHARACTER.
    if (hem == HEM_FOLLOWING)
      console_delete_right(p1(1));
    else if (hem == HEM_PRECEDING)
      console_delete_left(p1(1));
  }
	break;
	case 25:
#line 618 "ecma48.rl"
	{
    // DCS - DEVICE CONTROL STRING.  This console doesn't interpret
    // any device control strings.
  }
	break;
	case 26:
#line 623 "ecma48.rl"
	{
    // DC1 - DEVICE CONTROL ONE.  This console doesn't have any 
    // devices to control.
  }
	break;
	case 27:
#line 628 "ecma48.rl"
	{
    // DC2 - DEVICE CONTROL TWO.  This console doesn't have any
    // devices to control.
  }
	break;
	case 28:
#line 633 "ecma48.rl"
	{
    // DC2 - DEVICE CONTROL THREE.  This console doesn't have any
    // devices to control.
  }
	break;
	case 29:
#line 638 "ecma48.rl"
	{
    // DC2 - DEVICE CONTROL FOUR.  This console doesn't have any
    // devices to control.
  }
	break;
	case 30:
#line 643 "ecma48.rl"
	{
    // DL - DELETE LINE.
    if (vem == 0)
      console_delete_line_down(p1(1));
    else if (vem == 1)
      console_delete_line_up(p1(1));
    console_move_to_column(line_home - 1); // ECMA-48 coords begin a 1
  }
	break;
	case 31:
#line 652 "ecma48.rl"
	{
    // DLE - DATA LINK ESCAPE.  In ISO 1745, this would disconnect
    // communication.
  }
	break;
	case 32:
#line 662 "ecma48.rl"
	{
    // DSR - DEVICE STATUS REPORT.  This console doesn't respond to
    // status report requests from the input stream.
  }
	break;
	case 33:
#line 667 "ecma48.rl"
	{
    // DTA - DIMENSION TEXT AREA.  This establishes the dimensions
    // of the text area for the next page.  This console doesn't have
    // pages, so it is unimplemented.
  }
	break;
	case 34:
#line 673 "ecma48.rl"
	{
    // EA - ERASE IN AREA.  The concept of 'areas' is unimplemented.
  }
	break;
	case 35:
#line 677 "ecma48.rl"
	{
    // ECH - ERASE CHARACTER.
    console_erase_right(p1(1));
  }
	break;
	case 36:
#line 682 "ecma48.rl"
	{
    // ED - ERASE IN PAGE.
    int s = p1(0);
    if (s == 1)
      console_erase_to_beginning_of_page();
    else if (s == 0)
      console_erase_to_end_of_page();
    else if (s == 2)
      console_erase_page ();
  }
	break;
	case 37:
#line 693 "ecma48.rl"
	{
    // EF - ERASE IN FIELD.  This console has no notion of fields.
  }
	break;
	case 38:
#line 697 "ecma48.rl"
	{
    // EL - ERASE IN LINE
    int s = p1(0);
    if (s == 1)
      console_erase_to_beginning_of_line();
    else if (s == 0)
      console_erase_to_end_of_line();
    else if (s == 2)
      console_erase_line ();
  }
	break;
	case 39:
#line 708 "ecma48.rl"
	{
    // EM - END OF MEDIUM.  This console has no physical end, so this
    // is ignored.
  }
	break;
	case 40:
#line 722 "ecma48.rl"
	{
    // EPA - END OF GUARDED AREA.  This console doesn't implement areas.
  }
	break;
	case 41:
#line 730 "ecma48.rl"
	{
    // FF - FORM FEED.  This is traditionally used as reset screen for
    // consoles.
    console_erase_page();
    console_move_to_row(page_home - 1);	// ECMA-48 coordinates begin at 1
  }
	break;
	case 42:
#line 737 "ecma48.rl"
	{
    // FNK - FUNCTION KEY.  Sent by the input stream when function keys
    // are pressed.
  }
	break;
	case 43:
#line 742 "ecma48.rl"
	{
    // FNT - FONT SELECTION.  This is supposed to map a font number into
    // on of the 10 font slots available by SGR calls, but, this console
    // doesn't have remappable fonts.
  }
	break;
	case 44:
#line 748 "ecma48.rl"
	{
    // GCC - GRAPHIC CHARACTER COMBINATION.  Overstriking characters would
    // be sweet, but, this isn't implemented.
  }
	break;
	case 45:
#line 753 "ecma48.rl"
	{
    // GSM - GRAPHIC SIZE MODIFICATION.  This would scale the font height
    // or width.
  }
	break;
	case 46:
#line 762 "ecma48.rl"
	{
    // HPA - CHARACTER POSITION ABSOLUTE.
    console_move_to_column(p1(1)- 1); 	// ECMA-48 coordinates begin at 1
  }
	break;
	case 47:
#line 767 "ecma48.rl"
	{
    // HPB - CHARACTER POSITION BACKWARD.
    console_move_left(p1(1));
  }
	break;
	case 48:
#line 772 "ecma48.rl"
	{
    // HPR - CHARACTER POSITION FORWARD.
    console_move_right(p1(1));
  }
	break;
	case 49:
#line 777 "ecma48.rl"
	{
    // HT - CHARACTER TABULATION.  This is a single tab.
    console_move_tab_right(p1(1));
  }
	break;
	case 50:
#line 782 "ecma48.rl"
	{
    // HTJ - CHARACTER TABULATION WITH JUSTIFICATION. Unimplemented.
  }
	break;
	case 51:
#line 786 "ecma48.rl"
	{
    // HTS - CHARACTER TABULATION SET.  Unimplemented.
  }
	break;
	case 52:
#line 795 "ecma48.rl"
	{
    // ICH - INSERT CHARACTER.
    if (hem == HEM_FOLLOWING) {
      console_insert_right(p1(1));
      console_move_to_column(line_home - 1); // ECMA-48 coords begin at 1
    }
    else if (hem == HEM_PRECEDING) {
      console_insert_left(p1(1));
      console_move_to_column(line_home - 1);
    }
  }
	break;
	case 53:
#line 811 "ecma48.rl"
	{
    // IGS - IDENTIFY GRAPHIC SUBREPERTOIRE.  Used to indicate that
    // a repertoire of ISO 10367 is used in the following text.
  }
	break;
	case 54:
#line 816 "ecma48.rl"
	{
    // IL - INSERT LINE.
    if (vem == 0)
      console_insert_line_down(p1(1));
    else if (vem == 1)
      console_insert_line_up(p1(1));
    console_move_to_column(line_home - 1); // ECMA-48 coordinates begin at 1
  }
	break;
	case 55:
#line 825 "ecma48.rl"
	{
    // INT - INTERRUPT. Data stream indicates to console that the current
    // process is to be interrupted and some agreed procedure is to be
    // initiated.
  }
	break;
	case 56:
#line 831 "ecma48.rl"
	{
    // IS1 - INFORMATION SEPARATOR ONE (UNIT SEPARATOR)
  }
	break;
	case 57:
#line 835 "ecma48.rl"
	{
    // IS2 - INFORMATION SEPARATOR TWO (RECORD SEPARATOR)
  }
	break;
	case 58:
#line 839 "ecma48.rl"
	{
    // IS3 - INFORMATION SEPARATOR THREE (GROUP SEPARATOR)
  }
	break;
	case 59:
#line 843 "ecma48.rl"
	{
    // IS4 - INFORMATION SEPARATOR FOUR (FILE SEPARATOR)
  }
	break;
	case 60:
#line 847 "ecma48.rl"
	{
    // JFY - JUSTIFY. Indicates the beginning or end of a string that
    // was to be justified on the screen.  Cool, but, unimplemented.
  }
	break;
	case 61:
#line 852 "ecma48.rl"
	{
    // LF - LINE FEED.
    console_move_down(1);
  }
	break;
	case 62:
#line 857 "ecma48.rl"
	{
    // LS0 - LOCKING-SHIFT ZERO
    // term_locking_shift (0);
    GL = G0;
  }
	break;
	case 63:
#line 863 "ecma48.rl"
	{
    // LS1 - LOCKING-SHIFT ONE
    // term_locking_shift (1);
    GL = G1;
  }
	break;
	case 64:
#line 869 "ecma48.rl"
	{
    // LS1R - LOCKING-SHIFT ONE RIGHT
    // term_locking_shift_right (1);
    GR = G1;
  }
	break;
	case 65:
#line 881 "ecma48.rl"
	{
    // LS2R - LOCKING-SHIFT TWO RIGHT
    // term_locking_shift_right (2);
    GR = G2;
  }
	break;
	case 66:
#line 887 "ecma48.rl"
	{
    // LS3 - LOCKING-SHIFT THREE
    // term_locking_shift (3);
    GL = G3;
  }
	break;
	case 67:
#line 893 "ecma48.rl"
	{
    // LS3R - LOCKING-SHIFT THREE RIGHT
    // term_locking_shift_right (3);
    GR = G3;
  }
	break;
	case 68:
#line 899 "ecma48.rl"
	{
    // MC - MEDIA COPY.  Unimplemented, because there is no
    // auxiliary devoce to which one would copy.
  }
	break;
	case 69:
#line 904 "ecma48.rl"
	{
    // MW - MESSAGE WAITING. Used to set a message-waiting indicator
    // on the console.
  }
	break;
	case 70:
#line 915 "ecma48.rl"
	{
    // NBH - NO BREAK HERE.  Clever breaking is not implemented.
  }
	break;
	case 71:
#line 919 "ecma48.rl"
	{
    // NEL - NEXT LINE.
    if (simd == 0) {
      console_move_down(1);
      console_move_to_column(line_home - 1);
    }
    else if (simd == 1) {
      console_move_down(1);
      console_move_to_column(line_limit - 1);
    }
  }
	break;
	case 72:
#line 931 "ecma48.rl"
	{
    // NP - NEXT PAGE.  Unimplemented since the console has a single
    // page.
  }
	break;
	case 73:
#line 936 "ecma48.rl"
	{
    // NUL - NULL.
  }
	break;
	case 74:
#line 940 "ecma48.rl"
	{
    // OSC - OPERATING SYSTEM COMMAND.  The data stream sends a string
    // that is denoted as an operating system command.  This console
    // doesn't interpret it.
  }
	break;
	case 75:
#line 946 "ecma48.rl"
	{
    // PEC - PRESENTATION EXPAND OR CONTRACT.  Unimplemented since
    // this console doesn't have variable spacing.
  }
	break;
	case 76:
#line 951 "ecma48.rl"
	{
    // PFS - PAGE FORMAT SELECTION.  Unimplemented since this console's
    // page size can't be modified by the data stream.
  }
	break;
	case 77:
#line 956 "ecma48.rl"
	{
    // PLD - PARTIAL LINE DOWN.  Unimplemented.  This would move the
    // cursor down by a half line.
  }
	break;
	case 78:
#line 961 "ecma48.rl"
	{
    // PLU - PARTIAL LINE UP.  Unimplemented.  This would move the cursor
    // up by a half line.
  }
	break;
	case 79:
#line 966 "ecma48.rl"
	{
    // PM - PRIVACY MESSAGE.  The data stream sends a string to the
    // console denoted as a privacy message.  The console ignores it.
  }
	break;
	case 80:
#line 971 "ecma48.rl"
	{
    // PP - PRECEDING PAGE.  Unimplemented since this console doesn't
    // have pages.
  }
	break;
	case 81:
#line 976 "ecma48.rl"
	{
    // PPA - PAGE POSITION ABSOLUTE.  Would move the active position
    // to a given page.  Unimplemented, since this console has only one page.
  }
	break;
	case 82:
#line 981 "ecma48.rl"
	{
    // PPB - PAGE POSITION BACKWARD.  Would move the active position
    // to a previous page.  Unimplemented, since this console has only
    // one page.
  }
	break;
	case 83:
#line 987 "ecma48.rl"
	{
    // PPB - PAGE POSITION FORWARD.  Would move the active position
    // to a following page.  Unimplemented, since this console has only
    // one page.
  }
	break;
	case 84:
#line 993 "ecma48.rl"
	{
    // PTX - PARALLEL TEXTS.  Denotes that the next couple of strings
    // are supposed to be drawn one over the other.  Unimplemented because
    // it is too complicated.
  }
	break;
	case 85:
#line 999 "ecma48.rl"
	{
    // PU1 - PRIVATE USE ONE. Unimplemented.
  }
	break;
	case 86:
#line 1003 "ecma48.rl"
	{
    // PU1 - PRIVATE USE TWO. Unimplemented.
  }
	break;
	case 87:
#line 1007 "ecma48.rl"
	{
    // QUAD.  Would center or flush the previous line or string.
    // Unimplemented because it is too complicated.
  }
	break;
	case 88:
#line 1012 "ecma48.rl"
	{
    // REP - REPEAT.  Would repeat the preceding graphic character
    // multiple times.  Unimplemented.
  }
	break;
	case 89:
#line 1017 "ecma48.rl"
	{
    // RI - REVERSE LINE FEED.
    console_move_up(1);
  }
	break;
	case 90:
#line 1022 "ecma48.rl"
	{
    // RIS - RESET TO INITIAL STATE.
    console_reset();
  }
	break;
	case 91:
#line 1027 "ecma48.rl"
	{
    // RM - RESET MODE
    for (int i = 0; i < P_size; i ++) {
      if (P[i] == 4)
	irm = IRM_REPLACE;
      else if (P[i] == 7)
	vem = 0;
      else if (P[i] == 10)
	hem = HEM_FOLLOWING;
      else if (P[i] == 21)
	grcm = GRCM_COMBINING;
    }
  }
	break;
	case 92:
#line 1041 "ecma48.rl"
	{
    // SACS - SET ADDITIONAL CHARACTER SEPARATION.  Would change the
    // spacing between characters on the console.  Unimplemented.
  }
	break;
	case 93:
#line 1051 "ecma48.rl"
	{
    // SCI - SINGLE CHARACTER INTRODUCER.  Not a command, but, a
    // family of possible future commands.  Unimplemented.
  }
	break;
	case 94:
#line 1056 "ecma48.rl"
	{
    // SCO - SELECT CHARACTER ORIENTATION.  Would allow one to choose
    // the rotation of the characters.  Sounds like fun.  Unimplemented.
  }
	break;
	case 95:
#line 1061 "ecma48.rl"
	{
    // SCP - SELECT CHARACTER PATH.  Would allow changing the character
    // path from right-to-left, top-to-bottom, or left-to-right.
    // Unimplemented.
  }
	break;
	case 96:
#line 1067 "ecma48.rl"
	{
    // SCS - SET CHARACTER SPACING.  Would allow modification of the
    // character spacing.  Unimplemented.
  }
	break;
	case 97:
#line 1072 "ecma48.rl"
	{
    // SD - SCROLL DOWN.
    console_scroll_down(p1(1));
  }
	break;
	case 98:
#line 1077 "ecma48.rl"
	{
    // SDS - START DIRECTED STRING. Would allow one to label the 
    // string as right-to-left or left-to-right.  Unimplemented.
  }
	break;
	case 99:
#line 1082 "ecma48.rl"
	{
    // SEE - SET EDITING EXTENT.  Would allow one to establish
    // a portion of the console as the extent that is modified
    // by the character insertion or deletion operations.
    // Possibly useful.  Unimplemented.
  }
	break;
	case 100:
#line 1089 "ecma48.rl"
	{
    // SEF - SHEET EJECT AND FEED.  Unimplemented.
  }
	break;
	case 101:
#line 1093 "ecma48.rl"
	{
    // SGR - SELECT GRAPHIC RENDITION
    //reparse_P ();
    if (grcm == GRCM_REPLACING)
      console_set_default();
    for (int i = 0; i < P_size; i ++) {
      switch (P[i]) {
	case 0:
	  console_set_default();
	  break;
	case 1:
	  console_set_intensity(CONSOLE_INTENSITY_BOLD);
	  break;
	case 2:
	  console_set_intensity(CONSOLE_INTENSITY_FAINT);
	  break;
	case 3:
	  // Italicized
	  break;
	case 4:
	  console_set_underline(CONSOLE_UNDERLINE_SINGLY);
	  break;
	case 5:
	  console_set_blink(CONSOLE_BLINK_SLOW);
	  break;
	case 6:
	  console_set_blink(CONSOLE_BLINK_FAST);
	  break;
	case 7:
	  console_set_polarity(CONSOLE_POLARITY_NEGATIVE);
	  break;
	case 8:
	  // Concealed.
	  break;
	case 9:
	  // Strike-through
	  break;
	case 10:
	case 11:
	case 12:
	case 13:
	case 14:
	case 15:
	case 16:
	case 17:
	case 18:
	case 19:
	  // Alternative fonts
	  break;
	case 20:
	  // Fraktur
	  break;
	case 21:
	  console_set_underline(CONSOLE_UNDERLINE_DOUBLY);
	  break;
	case 22:
	  console_set_intensity(CONSOLE_INTENSITY_NORMAL);
	  console_set_fgcolor(CONSOLE_COLOR_DEFAULT);
	  console_set_bgcolor(CONSOLE_COLOR_DEFAULT);
	  break;
	case 23:
	  // Turn off italicization and fraktur.
	  break;
	case 24:
	  console_set_underline(CONSOLE_UNDERLINE_NONE);
	  break;
	case 25:
	  console_set_blink (CONSOLE_BLINK_NONE);
	  break;
	case 26:
	  // Reserved
	  break;
	case 27:
	  console_set_polarity(CONSOLE_POLARITY_POSITIVE);
	  break;
	case 28:
	  // Turn off concealed
	  break;
	case 29:
	  // Turn off strike-through
	  break;
	case 30:
	  console_set_fgcolor(CONSOLE_COLOR_BLACK);
	  break;
	case 31:
	  console_set_fgcolor(CONSOLE_COLOR_RED);
	  break;
	case 32:
	  console_set_fgcolor(CONSOLE_COLOR_GREEN);
	  break;
	case 33:
	  console_set_fgcolor(CONSOLE_COLOR_YELLOW);
	  break;
	case 34:
	  console_set_fgcolor(CONSOLE_COLOR_BLUE);
	  break;
	case 35:
	  console_set_fgcolor(CONSOLE_COLOR_MAGENTA);
	  break;
	case 36:
	  console_set_fgcolor(CONSOLE_COLOR_CYAN);
	  break;
	case 37:
	  console_set_fgcolor(CONSOLE_COLOR_WHITE);
	  break;
	case 38:
	  console_set_fgcolor(CONSOLE_COLOR_TRANSPARENT);
	  break;
	case 39:
	  // white is default
	  console_set_fgcolor(CONSOLE_COLOR_DEFAULT);
	  break;
	case 40:
	  console_set_bgcolor(CONSOLE_COLOR_BLACK);
	  break;
	case 41:
	  console_set_bgcolor(CONSOLE_COLOR_RED);
	  break;
	case 42:
	  console_set_bgcolor(CONSOLE_COLOR_GREEN);
	  break;
	case 43:
	  console_set_bgcolor(CONSOLE_COLOR_YELLOW);
	  break;
	case 44:
	  console_set_bgcolor(CONSOLE_COLOR_BLUE);
	  break;
	case 45:
	  console_set_bgcolor(CONSOLE_COLOR_MAGENTA);
	  break;
	case 46:
	  console_set_bgcolor(CONSOLE_COLOR_CYAN);
	  break;
	case 47:
	  console_set_bgcolor(CONSOLE_COLOR_WHITE);
	  break;
	case 48:
	  console_set_bgcolor(CONSOLE_COLOR_TRANSPARENT);
	  break;
	case 49:
	  // Default BG color
	  console_set_bgcolor(CONSOLE_COLOR_DEFAULT);
	  break;
	case 50:
	  // Reserved
	  break;
	case 51:
	case 52:
	case 53:
	case 54:
	case 55:
	  // Framing, encircline, and overlining
	  break;
	case 56:
	case 57:
	case 58:
	case 59:
	  // Unspecified
	case 60:
	case 61:
	case 62:
	case 63:
	case 64:
	case 65:
	  // Ideogram decorations
	default:
	  break;
	}
    }
  }
	break;
	case 102:
#line 1269 "ecma48.rl"
	{
    // SIMD - SELECT IMPLICIT MOVEMENT DIRECTION. Necessary for right-to-left
    // languages.
    simd = p1(0);
  }
	break;
	case 103:
#line 1275 "ecma48.rl"
	{
    // SL - SCROLL LEFT.
    console_scroll_left (p1(1));
  }
	break;
	case 104:
#line 1280 "ecma48.rl"
	{
    // SLH - SET LINE HOME. Determines the location of the cursor after,
    // carriage return, next line, insert line or delete line.
    line_home = p1(1);
  }
	break;
	case 105:
#line 1286 "ecma48.rl"
	{
    // SLL - SET LINE LIMIT
    line_limit = p1(CONSOLE_COLS);
  }
	break;
	case 106:
#line 1291 "ecma48.rl"
	{
    // SLS - SET LINE SPACING. Determine line spacing for following text.
    // Unimplemented.
  }
	break;
	case 107:
#line 1296 "ecma48.rl"
	{
    // SM - SET MODE.  Flip the boolean mode to the 
    // non-nominal state.
    for (int i = 0; i < P_size; i ++) {
      if (P[i] == 4)
	irm = IRM_INSERT;
      else if (P[i] == 7)
	vem = 1;
      else if (P[i] == 10)
	hem = HEM_PRECEDING;
      else if (P[i] == 21)
	grcm = GRCM_REPLACING;
    }
  }
	break;
	case 108:
#line 1311 "ecma48.rl"
	{
    // SOS - START OF STRING.  Allows the data stream to send a string
    // to the console.  This console doesn't interpret them.
  }
	break;
	case 109:
#line 1316 "ecma48.rl"
	{
    // SPA - START OF GUARDED AREA. Guarding is not implemented.
  }
	break;
	case 110:
#line 1320 "ecma48.rl"
	{
    // SPD - SELECT PRESENTATION DIRECTIONS.  Directionality is
    // unimplemented.
  }
	break;
	case 111:
#line 1325 "ecma48.rl"
	{
    // SPH - SET PAGE HOME.  Sets the line to which the active position
    // is set after a FORM FEED.
    page_home = p1(1);
  }
	break;
	case 112:
#line 1331 "ecma48.rl"
	{
    // SPI - SPACING INCREMENT.  Used to set the line and character
    // spacing.  Unimplemented.
  }
	break;
	case 113:
#line 1336 "ecma48.rl"
	{
    // SPL - SET PAGE LIMIT.  Sets the line on the page beyond which
    // the active position may not be moved.  Unimplemented, because
    // it is fixed for this console.
  }
	break;
	case 114:
#line 1342 "ecma48.rl"
	{
    // SPQR - SELECT PRINT QUALITY AND RAPIDITY.  Would let one
    // choose the DPI of the fonts.  Unimplemented.
  }
	break;
	case 115:
#line 1347 "ecma48.rl"
	{
    // SR _SCROLL RIGHT.
    console_scroll_right (p1(1));
  }
	break;
	case 116:
#line 1352 "ecma48.rl"
	{
    // SRCS - SET REDUCED CHARACTER SEPARATOR. Would reduce in
    // inter-character spacing.  Unimplemented.
  }
	break;
	case 117:
#line 1357 "ecma48.rl"
	{
    // SRS - START REVERSED STRING.  Would allow one to designate some
    // text to have the opposite directionality.  Unimplemented.
  }
	break;
	case 118:
#line 1362 "ecma48.rl"
	{
    // SSA - START OF SELECTED AREA.  Areas are unimplemented.
  }
	break;
	case 119:
#line 1366 "ecma48.rl"
	{
    // SSU - SELECT SIZE UNIT. Would allow one to establish the units used
    // in the various size-setting functions.  Unimplemented.
  }
	break;
	case 120:
#line 1371 "ecma48.rl"
	{
    // SSW - SET SPACE WIDTH.  Would allow one to set the width of a space.
    // Unimplemented.
  }
	break;
	case 121:
#line 1376 "ecma48.rl"
	{
    // SS2 - SINGLE-SHIFT TWO.  The next graphical character comes from
    // character set G2.
    // term_single_shift (2);
    console_write_char (codepoint_tables[G2][*p - 0x20], irm, hem, simd,
		  line_home - 1, line_limit - 1);
  }
	break;
	case 122:
#line 1384 "ecma48.rl"
	{
    // SS3 - SINGLE-SHIFT THREE.  The next graphical character will come
    // from the character set G3.
    // term_single_shift (3);
    console_write_char (codepoint_tables[G3][*p - 0x20], irm, hem, simd,
		  line_home - 1, line_limit - 1);
  }
	break;
	case 123:
#line 1392 "ecma48.rl"
	{
    // STAB - SELECTIVE TABULATION.  Something to do with jumping to
    // a specified tab.  Unimplemented.
  }
	break;
	case 124:
#line 1397 "ecma48.rl"
	{
    // STS - SET TRANSMIT STATE.  Used to set the transmit state of the
    // console.  Unimplemented.
  }
	break;
	case 125:
#line 1402 "ecma48.rl"
	{
    // SU - SCROLL UP.
    console_scroll_up(p1(1));
  }
	break;
	case 126:
#line 1407 "ecma48.rl"
	{
    // SUB - SUBSTITUTE.  If the data stream sent a SUB, it would be
    // indicating that it is a replacement for an invalid or erroneous
    // byte.  Ignored.
  }
	break;
	case 127:
#line 1413 "ecma48.rl"
	{
    // SVS - SELECT LINE SPACING.  Would set the lines-per-inch for the
    // following text.  Unimplemented.
  }
	break;
	case 128:
#line 1423 "ecma48.rl"
	{
    // TAC - TABULATION ALIGNED CENTRED.  Would allow one to center a field
    // on a tab stop.  Unimplemented.
  }
	break;
	case 129:
#line 1428 "ecma48.rl"
	{
    // TAC - TABULATION ALIGNED LEADING EDGE.  Would allow one to
    // center a field on a tab stop.  Unimplemented.
  }
	break;
	case 130:
#line 1433 "ecma48.rl"
	{
    // TAC - TABULATION ALIGNED TRAILING EDGE.  Would allow one to
    // center a field on a tab stop.  Unimplemented.
  }
	break;
	case 131:
#line 1438 "ecma48.rl"
	{
    // TBC - TABULATION CLEAR. Woudl allow one to clear tabstops.
    // Unimplemented.
  }
	break;
	case 132:
#line 1443 "ecma48.rl"
	{
    // TCC - TABULATION CENTRED ON CHARACTER.  Another fancy tab stop.
    // Unimplemented.
  }
	break;
	case 133:
#line 1448 "ecma48.rl"
	{
    // TSR - TABULATION STOP REMOVE.  Remove the tab stop at the current
    // location.  Unimplemented.
  }
	break;
	case 134:
#line 1453 "ecma48.rl"
	{
    // TSS - THIN SPACE SPECIFICATION.  Thin spaces are unimplemented.
  }
	break;
	case 135:
#line 1457 "ecma48.rl"
	{
    // VPA - LINE POSITION ABSOLUTE.
    console_move_to_row(p1(1));
  }
	break;
	case 136:
#line 1462 "ecma48.rl"
	{
    // VPB - LINE POSITION BACKWARD
    console_move_up(p1(1));
  }
	break;
	case 137:
#line 1467 "ecma48.rl"
	{
    // VPR - LINE POSITION FORWARD
    console_move_down(p1(1));
  }
	break;
	case 138:
#line 1472 "ecma48.rl"
	{
    // VT - LINE TABULATION
    console_move_vertical_tab_down(1);
  }
	break;
	case 139:
#line 1477 "ecma48.rl"
	{
    // VTS - LINE TABULATION SET.  Would set the vertical tab stops.
    // Unimplemented.
  }
	break;
	case 140:
#line 1482 "ecma48.rl"
	{
    int n = *p;
    if (n >= 0x20 && n <= 0x7F)
      console_write_char (codepoint_tables[GL][n - 0x20], irm, hem, simd,
		       line_home - 1, line_limit - 1);
    else if (n >= 0xA0 && n <= 0xFF)
      console_write_char (codepoint_tables[GR][n - 0xA0], irm, hem, simd,
		       line_home - 1, line_limit - 1);
  }
	break;
	case 141:
#line 1496 "ecma48.rl"
	{
  //   unsigned char *pos = fpc;
  //   int i, n;
  //   P_size = 0;
    
  // loop:
  //   n = 0;
  //   i = 1;
  //   while (*pos >= '0' && *pos <= '9') {
  //     n += (*pos - '0') * i;
  //     i *= 10;
  //     pos ++;
  //   }
  //   P[P_size] = n;
  //   P_size ++;
  //   SDL_assert(P_size < PARAMS);
  //   if (*pos == ';')
  //     goto loop;
  //   fpc = pos;
  }
	break;
#line 2635 "ecma48.c"
		}
	}

_again:
	if ( cs == 0 )
		goto _out;
	if ( ++p != pe )
		goto _resume;
	_test_eof: {}
	if ( p == eof )
	{
	const unsigned char *__acts = _ECMA48_actions + _ECMA48_eof_actions[cs];
	unsigned int __nacts = (unsigned int) *__acts++;
	while ( __nacts-- > 0 ) {
		switch ( *__acts++ ) {
	case 101:
#line 1093 "ecma48.rl"
	{
    // SGR - SELECT GRAPHIC RENDITION
    //reparse_P ();
    if (grcm == GRCM_REPLACING)
      console_set_default();
    for (int i = 0; i < P_size; i ++) {
      switch (P[i]) {
	case 0:
	  console_set_default();
	  break;
	case 1:
	  console_set_intensity(CONSOLE_INTENSITY_BOLD);
	  break;
	case 2:
	  console_set_intensity(CONSOLE_INTENSITY_FAINT);
	  break;
	case 3:
	  // Italicized
	  break;
	case 4:
	  console_set_underline(CONSOLE_UNDERLINE_SINGLY);
	  break;
	case 5:
	  console_set_blink(CONSOLE_BLINK_SLOW);
	  break;
	case 6:
	  console_set_blink(CONSOLE_BLINK_FAST);
	  break;
	case 7:
	  console_set_polarity(CONSOLE_POLARITY_NEGATIVE);
	  break;
	case 8:
	  // Concealed.
	  break;
	case 9:
	  // Strike-through
	  break;
	case 10:
	case 11:
	case 12:
	case 13:
	case 14:
	case 15:
	case 16:
	case 17:
	case 18:
	case 19:
	  // Alternative fonts
	  break;
	case 20:
	  // Fraktur
	  break;
	case 21:
	  console_set_underline(CONSOLE_UNDERLINE_DOUBLY);
	  break;
	case 22:
	  console_set_intensity(CONSOLE_INTENSITY_NORMAL);
	  console_set_fgcolor(CONSOLE_COLOR_DEFAULT);
	  console_set_bgcolor(CONSOLE_COLOR_DEFAULT);
	  break;
	case 23:
	  // Turn off italicization and fraktur.
	  break;
	case 24:
	  console_set_underline(CONSOLE_UNDERLINE_NONE);
	  break;
	case 25:
	  console_set_blink (CONSOLE_BLINK_NONE);
	  break;
	case 26:
	  // Reserved
	  break;
	case 27:
	  console_set_polarity(CONSOLE_POLARITY_POSITIVE);
	  break;
	case 28:
	  // Turn off concealed
	  break;
	case 29:
	  // Turn off strike-through
	  break;
	case 30:
	  console_set_fgcolor(CONSOLE_COLOR_BLACK);
	  break;
	case 31:
	  console_set_fgcolor(CONSOLE_COLOR_RED);
	  break;
	case 32:
	  console_set_fgcolor(CONSOLE_COLOR_GREEN);
	  break;
	case 33:
	  console_set_fgcolor(CONSOLE_COLOR_YELLOW);
	  break;
	case 34:
	  console_set_fgcolor(CONSOLE_COLOR_BLUE);
	  break;
	case 35:
	  console_set_fgcolor(CONSOLE_COLOR_MAGENTA);
	  break;
	case 36:
	  console_set_fgcolor(CONSOLE_COLOR_CYAN);
	  break;
	case 37:
	  console_set_fgcolor(CONSOLE_COLOR_WHITE);
	  break;
	case 38:
	  console_set_fgcolor(CONSOLE_COLOR_TRANSPARENT);
	  break;
	case 39:
	  // white is default
	  console_set_fgcolor(CONSOLE_COLOR_DEFAULT);
	  break;
	case 40:
	  console_set_bgcolor(CONSOLE_COLOR_BLACK);
	  break;
	case 41:
	  console_set_bgcolor(CONSOLE_COLOR_RED);
	  break;
	case 42:
	  console_set_bgcolor(CONSOLE_COLOR_GREEN);
	  break;
	case 43:
	  console_set_bgcolor(CONSOLE_COLOR_YELLOW);
	  break;
	case 44:
	  console_set_bgcolor(CONSOLE_COLOR_BLUE);
	  break;
	case 45:
	  console_set_bgcolor(CONSOLE_COLOR_MAGENTA);
	  break;
	case 46:
	  console_set_bgcolor(CONSOLE_COLOR_CYAN);
	  break;
	case 47:
	  console_set_bgcolor(CONSOLE_COLOR_WHITE);
	  break;
	case 48:
	  console_set_bgcolor(CONSOLE_COLOR_TRANSPARENT);
	  break;
	case 49:
	  // Default BG color
	  console_set_bgcolor(CONSOLE_COLOR_DEFAULT);
	  break;
	case 50:
	  // Reserved
	  break;
	case 51:
	case 52:
	case 53:
	case 54:
	case 55:
	  // Framing, encircline, and overlining
	  break;
	case 56:
	case 57:
	case 58:
	case 59:
	  // Unspecified
	case 60:
	case 61:
	case 62:
	case 63:
	case 64:
	case 65:
	  // Ideogram decorations
	default:
	  break;
	}
    }
  }
	break;
	case 140:
#line 1482 "ecma48.rl"
	{
    int n = *p;
    if (n >= 0x20 && n <= 0x7F)
      console_write_char (codepoint_tables[GL][n - 0x20], irm, hem, simd,
		       line_home - 1, line_limit - 1);
    else if (n >= 0xA0 && n <= 0xFF)
      console_write_char (codepoint_tables[GR][n - 0xA0], irm, hem, simd,
		       line_home - 1, line_limit - 1);
  }
	break;
#line 2836 "ecma48.c"
		}
	}
	}

	_out: {}
	}

#line 1762 "ecma48.rl"

    if ( cs == ECMA48_error )
        return -1;
    if ( cs >= ECMA48_first_final )
        return 1;
    return 0;
}
